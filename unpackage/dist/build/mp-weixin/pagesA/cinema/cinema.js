(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/cinema/cinema"],{"25af":function(t,e,a){"use strict";a.r(e);var i=a("dc2f"),o=a("404a");for(var n in o)"default"!==n&&function(t){a.d(e,t,function(){return o[t]})}(n);a("4d67");var s,r=a("f0c5"),_=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);e["default"]=_.exports},"404a":function(t,e,a){"use strict";a.r(e);var i=a("edc9"),o=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e["default"]=o.a},"4d67":function(t,e,a){"use strict";var i=a("cc87"),o=a.n(i);o.a},cc87:function(t,e,a){},d5d5:function(t,e,a){"use strict";(function(t){a("b64a"),a("921b");i(a("66fd"));var e=i(a("25af"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},dc2f:function(t,e,a){"use strict";var i,o=function(){var t=this,e=t.$createElement,a=(t._self._c,t._f("time_com")(t.start_day)),i=t._f("time_com")(t.end_day);t._isMounted||(t.e0=function(){t.time_tab_Br_tow=!t.time_tab_Br_tow},t.e1=function(){t.time_tab_Br_three=!t.time_tab_Br_three}),t.$mp.data=Object.assign({},{$root:{f0:a,f1:i}})},n=[];a.d(e,"b",function(){return o}),a.d(e,"c",function(){return n}),a.d(e,"a",function(){return i})},edc9:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(a("a34a")),o=s(a("86fc")),n=(a("b824"),s(a("2f71")));function s(t){return t&&t.__esModule?t:{default:t}}function r(t){return l(t)||d(t)||_()}function _(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function l(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}function c(t,e){return u(t)||h(t,e)||m()}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function h(t,e){var a=[],i=!0,o=!1,n=void 0;try{for(var s,r=t[Symbol.iterator]();!(i=(s=r.next()).done);i=!0)if(a.push(s.value),e&&a.length===e)break}catch(_){o=!0,n=_}finally{try{i||null==r["return"]||r["return"]()}finally{if(o)throw n}}return a}function u(t){if(Array.isArray(t))return t}function f(t,e,a,i,o,n,s){try{var r=t[n](s),_=r.value}catch(d){return void a(d)}r.done?e(_):Promise.resolve(_).then(i,o)}function p(t){return function(){var e=this,a=arguments;return new Promise(function(i,o){var n=t.apply(e,a);function s(t){f(n,i,o,s,r,"next",t)}function r(t){f(n,i,o,s,r,"throw",t)}s(void 0)})}}function g(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var w,v=function(){return Promise.all([a.e("common/vendor"),a.e("components/ei-calendar/ei-calendar")]).then(a.bind(null,"ca07"))},b=null,D=null,y=null,x={onShareAppMessage:function(){},filters:{time_com:function(t){var e=(0,n.default)(t).format("MM"),a="",i=t;return a=Number(e)<10?i.slice(6):i.slice(5),a}},components:{EiCalendar:v},data:function(){var t;return t={tathreecan_num:0,pp_sum_list:{total_bo_s:1},time_tab_Br_three:!1,date_three:[],time_tab_Br_tow:!1,date_tow:"",customDate_tow:[{cellClass:"custom-cell",date:"2019-05-23",top:[{class:"custom-cell-top-1"},{class:"custom-cell-top-2"}]}],pf_list_sum:{total_bo_s:"16613.00"},time_dd:"",start_day_year:"",end_day_year:"",year_data:[],year_index:-1,start_day_thre:"",end_day_three:"",ALL_month_index:-1,ALL_month:[],end_days:"",click_num:1,sel_year:"",sel_week:"",start_days:"",active_z:1e3,data_alltime_week:[],curren:0,is_year:"",data_alltime:[],time_tab_Br:!1,date:[],customDate:[{cellClass:"custom-cell",date:"2019-05-23",top:[{class:"custom-cell-top-1"},{class:"custom-cell-top-2"}]}],wHeight:"",time_tab:0,month:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],week:"",year:["2019","2018","2017","2016","2015","2014","2013","2012"],tab_title:["日票房","周票房","月票房","年票房"],Data_select_header:!0,num_three:0,pp_list:[],pp_date_data:"",pp_date:"",pf_list:[],tatowcan_num:0,pf_date_data:"",pf_date:"",pf_dates:"",is_index:!0,zb_title:[{zb_name:"分账票房(万元)",id:0,front_row:!0},{zb_name:"人次",id:1,front_row:!0},{zb_name:"场次",id:2,front_row:!0},{zb_name:"场均人次",id:3,front_row:!0},{zb_name:"平均票价",id:4,front_row:!1},{zb_name:"本地排名",id:5,front_row:!1},{zb_name:"网售票房(万元)",front_row:!1},{zb_name:"网售票房占比",front_row:!1},{zb_name:"网售人次(万)",front_row:!1},{zb_name:"网售人次占比",front_row:!1},{zb_name:"单座票房",front_row:!1},{zb_name:"场均票房",front_row:!1},{zb_name:"单银幕票房(万元)",front_row:!1}],categories_s:[]},g(t,"time_tab","0"),g(t,"end_dayend_day",""),g(t,"pixelRatio",""),g(t,"apHeight",""),g(t,"offsetTop",""),g(t,"windowHeight",""),g(t,"code",""),g(t,"cinema_data_data",{cinema_name:"--",halls:"--",seats:"--",city:"--"}),g(t,"realtime_data",{total_bo_s:"--",total_people_s:"--",cinema_rank:"--"}),g(t,"cinemalist_data",[]),g(t,"start_day",""),g(t,"end_day",""),g(t,"time_dat","15:15:15"),g(t,"time_set",""),g(t,"cWidth_ring",""),g(t,"cHeight_ring",""),g(t,"cWidth_ring_tow",""),g(t,"cHeight_ring_tow",""),g(t,"cWidth",""),g(t,"cHeight",""),g(t,"pixelRatio",1),g(t,"center_header_index",0),g(t,"center_header_data",["经营数据","影片票房","影片排片"]),t},created:function(){var t=this;this.time_set=setInterval(function(){var e=new Date,a=e.getHours(),i=e.getMinutes(),o=e.getSeconds(),n=a+":"+i+":"+o;a<10&&(a="0"+a),i<10&&(i="0"+i),o<10&&(o="0"+o),t.time_dat=n},1e3)},onUnload:function(){clearInterval(this.time_set)},onReady:function(){},onLoad:function(){var e=p(i.default.mark(function e(a){var o,n,s,r,_,d,l,m,h,u,f,p;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return o="https://db.topcdb.com/topprogram/get-date",e.next=3,t.request({url:o});case 3:if(n=e.sent,s=c(n,2),r=s[0],_=s[1],null==r){e.next=11;break}return t.showLoading({title:"数据加载失败"}),setTimeout(function(){t.hideLoading()},2e3),e.abrupt("return",!1);case 11:d=_.data.bo_date.endDate,l=_.data.bo_date.startDate,this.max_day=d,this.min_day=l,m=a.code,h=this.start_day,u=this.end_dayend_day,o="/topprogram/cinema-main",f={cinema_code:m,dtype:"range",with_fwf:1,start_date:h,end_date:u},this.cinema_data(o,this,f),this.start_day=h,this.end_day=u,setTimeout(this.getData,500),w=this,this.cWidth=t.upx2px(750),this.cHeight=t.upx2px(500),this.cWidth_ring=t.upx2px(750),this.cHeight_ring=t.upx2px(500),this.cWidth_ring_tow=t.upx2px(750),this.cHeight_ring_tow=t.upx2px(500),p=t.getSystemInfoSync(),this.pixelRatio_data=p.pixelRatio,this.apHeight=16,this.offsetTop=80,this.windowHeight=p.windowHeight+"px",this.code=m,console.log(p),this.wHeight=p.windowHeight-0+100+"px",this.z_data();case 40:case"end":return e.stop()}},e,this)}));function a(t){return e.apply(this,arguments)}return a}(),methods:{heade_map_click:function(){t.showToast({title:"即将上线，敬请期待",duration:2e3,icon:"none"})},center_tabthree_chehcked:function(t){var e=this.code,a=this.pp_date;a=0==t?(0,n.default)(a).subtract(1,"days").format("YYYY-MM-DD"):(0,n.default)(a).subtract(-1,"days").format("YYYY-MM-DD");var i="/topprogram/cinema-movie",o={cinema_code:e,dtype:"range",start_date:a,end_date:a};this.pp_index(i,this,o),this.pp_date=a,this.pp_date_data=(0,n.default)(a).format("YYYY年MM月DD日"),this.date_three=[new Date(a)],setTimeout(this.getData_three,500)},show_tabthree_show_chhhecked:function(){this.time_tab_Br_three=!0},ei_calendar_tap_three:function(t){console.log(t);var e=this,a=t.format.split("/"),i=a[0]+"-"+a[1]+"-"+a[2];console.log(i);var o=this.code,s="/topprogram/cinema-movie",r={cinema_code:o,dtype:"range",start_date:i,end_date:i};this.pp_index(s,e,r),this.pp_date=i,this.date_three=[new Date(i)],this.pp_date_data=(0,n.default)(i).format("YYYY年MM月DD日"),this.time_tab_Br_three=!1,setTimeout(this.getData_three,500)},time_tap:function(t){var e=this.code,a=this.pf_date;console.log(t);var i=r(this.zb_title);a=0==t?(0,n.default)(a).subtract(1,"days").format("YYYY-MM-DD"):(0,n.default)(a).subtract(-1,"days").format("YYYY-MM-DD");var o="/topprogram/cinema-movie",s={cinema_code:e,dtype:"range",start_date:a,end_date:a},_=(0,n.default)().format("YYYY-MM-DD");a==_?i.forEach(function(t,e){0==t.id&&(t.zb_name="实时票房")}):i.forEach(function(t,e){0==t.id&&(t.zb_name="票房")}),this.pf_index(o,this,s),this.zb_title=i,this.pf_date=a,this.pf_date_data=(0,n.default)(a).format("YYYY年MM月DD日"),this.pf_dates=a,this.date_tow=[new Date(a)],this.time_tab_Br_tow=!1,setTimeout(this.getData_two,500)},ei_calendar_tap_tow:function(t){var e=this,a=t.format.split("/"),i=a[0]+"-"+a[1]+"-"+a[2];console.log(i);var o=this.code,s="/topprogram/cinema-movie",r={cinema_code:o,dtype:"range",start_date:i,end_date:i};this.pf_index(s,e,r),this.pf_date=i,this.pf_date_data=(0,n.default)(i).format("YYYY年MM月DD日"),this.pf_dates=i,this.date_tow=[new Date(i)],this.time_tab_Br_tow=!1,setTimeout(e.getData_two,500)},show_chehid:function(){this.time_tab_Br_tow=!0},check_year:function(e,a){if(this.year_data instanceof Array)var i=this.year_data;else i=[];if(i.push(Number(e)),1==i.length&&t.showToast({title:"请选择结束年",icon:"none",mask:!0,duration:2e3}),this.year_data=i,this.year_index=a,2==i.length){if(i[0]==i[1])return t.showToast({title:"请勿选择同一年",icon:"none",mask:!0,duration:2e3}),this.year_data=i[0],!1;var o={},n="",s=this.code;if(i[0]>i[1]){var r=i[0],_=i[1];n="/topprogram/cinema-main",o={cinema_code:s,dtype:"year",with_fwf:1,start_date:_,end_date:r},this.start_day_year=_,this.end_day_year=r,this.start_day=_+"",this.end_day=r+"",this.click_num=4,this.Data_select_header=!0,this.year_data=[],this.year_index=-1,this.cinema_data(n,this,o),setTimeout(this.getData,500)}else if(i[1]>i[0]){r=i[1],_=i[0];n="/topprogram/cinema-main",o={cinema_code:s,dtype:"year",with_fwf:1,start_date:_,end_date:r},this.start_day_year=_,this.end_day_year=r,this.start_day=_+"",this.end_day=r+"",this.click_num=4,this.Data_select_header=!0,this.year_data=[],this.year_index=-1,this.cinema_data(n,this,o),setTimeout(this.getData,500)}}},check_month:function(e,a){if(3==e.length)var i=Number(e.slice(0,2));else i=Number(e.slice(0,1));if(this.ALL_month instanceof Array)var o=r(this.ALL_month);else o=[];var s=this,_=((0,n.default)(),i),d=this.is_year-0;if(1==o.length){var l=new Date(d+"-"+_+"-01").getTime();if(o[0]==l)return t.showToast({title:"请勿点击同一月",duration:2e3,icon:"none"}),this.ALL_month=o[0],!1;t.showToast({title:"请选择结束月",duration:2e3,icon:"none"})}o.push(new Date(d+"-"+_+"-01").getTime()),this.ALL_month_index=a,this.ALL_month=o;var c="",m={};if(2==o.length){var h=this.code;if(o[0]>o[1]){var u=new Date(o[0]),f=new Date(o[1]),p=0,g=[];console.log(f);for(var w=f;w<u;p++)g.push((0,n.default)(w).format("YYYY-MM")),w.setMonth(w.getMonth()+1);if(g.length>12)return t.showToast({title:"最多选择12个月"}),this.ALL_month=o[0],!1;var v=(0,n.default)(new Date(o[1])).format("YYYY-MM"),b=(0,n.default)(new Date(o[0])).format("YYYY-MM");this.start_day_thre=v,this.end_day_three=b,this.start_day=v,this.end_day=b,this.click_num=3,this.time_tab=2,this.Data_select_header=!0,this.ALL_month=[],this.ALL_month_index=-1,c="/topprogram/cinema-main",m={cinema_code:h,dtype:"month",with_fwf:1,start_date:v,end_date:b},this.cinema_data(c,s,m),setTimeout(s.getData,500)}else if(o[1]>o[0]){u=new Date(o[1]),f=new Date(o[0]),p=0,g=[];console.log(f);for(w=f;w<u;p++)g.push((0,n.default)(w).format("YYYY-MM")),w.setMonth(w.getMonth()+1);if(g.length>12)return t.showToast({title:"最多选择12个月"}),this.ALL_month=o[0],!1;v=(0,n.default)(new Date(o[0])).format("YYYY-MM"),b=(0,n.default)(new Date(o[1])).format("YYYY-MM");this.start_day_thre=v,this.end_day_three=b,this.start_day=v,this.end_day=b,this.click_num=3,this.time_tab=2,this.Data_select_header=!0,this.ALL_month=[],this.ALL_month_index=-1,c="/topprogram/cinema-main",m={cinema_code:h,dtype:"month",with_fwf:1,start_date:v,end_date:b},this.cinema_data(c,s,m),setTimeout(s.getData,500)}}},tap_year:function(t,e){var a=t,i=new Date(a,0,1);while(1!=i.getDay())i.setDate(i.getDate()+1);var o=new Date(a+1,0,1);while(1!=o.getDay())o.setDate(o.getDate()+1);console.log(i<o),console.log(o),this.is_year=a,this.curren=e},check_week:function(e,a){var i=this.is_year,o=this.code,s=this;if(this.data_alltime_week instanceof Array)var r=this.data_alltime_week;else r=[];e.length;var _="";_=e.split("~")[1],_=_.split("."),Number(_[0])<10&&(_[0]="0"+_[0]),Number(_[1])<10&&(_[1]="0"+_[1]),_=i+"-"+_[0]+"-"+_[1],this.active_z=a;var d=a;if(d<10&&(d="0"+(d+1)),r.push(new Date(_)),1==r.length){var l=i+"-W"+d,c=(0,n.default)(),m=(0,n.default)(c).format("w"),h=(0,n.default)(c).format("YYYY");if(h>i){var u=i+g+"周";this.start_day=l,this.sel_year=i,this.sel_week=g,this.start_days=u}else if(h==i){if(d<=m){u=i+d+"周";this.start_day=l,this.sel_year=i,this.sel_week=d,this.start_days=u}t.showLoading({title:"请选择结束日期",mask:!1,icon:"none",duration:2e3})}}if(2==r.length){l=this.start_day,u=this.start_days,c=(0,n.default)(),m=(0,n.default)(c).format("w"),h=(0,n.default)(c).format("YYYY");var f="",p={};if(r[0]==r[1])return t.showLoading({title:"请选择不同的周",mask:!1,duration:2e3,icon:"none"}),this.data_alltime_week=r[0],!1;h=(0,n.default)(new Date).format("YYYY");var g=[],w=0,v=0;if(r[0]-r[1]>0){for(var b=r[0],D=r[1];D<b;v++){if(1==w)var y=new Date(D.getFullYear(),D.getMonth(),D.getDate()+4);else y=D;var x=D.getTime(),Y=(new Date).getTime();if(x>=Y)D.setDate(D.getDate()+6);else{var F="第"+v+"周 "+(y.getMonth()+1)+"."+y.getDate()+"~";if(D.setDate(D.getDate()+6),D<b){var z=D.getMonth()+1+"."+D.getDate();D.setDate(D.getDate()+1)}else b.setDate(b.getDate()+1),z=b.getMonth()+1+"."+b.getDate();g.push(F+z)}}if(g.length>12)return t.showLoading({title:"最多选择12周",mask:!1,duration:2e3,icon:"none"}),this.data_alltime_week=[],!1;if(i<h){var M=i+"-W"+d,k=i+d+"周",T=l.split("-W"),L=T[0],A=T[1];L<=i&&A<=d||(M=l,l=i+"-W"+d,k=u,u=i+g+"周"),u=l.replace("-W","-")+"周",k=M.replace("-W","-")+"周",this.start_day=l,this.end_day=M,this.start_days=u,this.end_days=k,this.Data_select_header=!0,this.click_num=2,this.active_z=-1,f="/topprogram/cinema-main",p={cinema_code:o,dtype:"week",with_fwf:1,start_date:l,end_date:M},this.cinema_data(f,this,p),setTimeout(this.getData,500)}else if(i==h){M=i+"-W"+d,k=i+d+"周",T=l.split("-W"),L=T[0],A=T[1];L<=i&&A<=d||(M=l,l=i+"-W"+d,k=u,u=i+d+"周"),u=l.replace("-W","-")+"周",k=M.replace("-W","-")+"周",this.start_day=l,this.end_day=M,this.start_days=u,this.end_days=k,this.Data_select_header=!0,this.active_z=-1,this.click_num=2,f="/topprogram/cinema-main",p={cinema_code:o,dtype:"week",with_fwf:1,start_date:l,end_date:M},console.log(f),s.cinema_data(f,s,p),setTimeout(s.getData,500)}}else if(r[1]>r[0]>0){for(b=r[1],D=r[0];D<b;v++){if(1==w)y=new Date(D.getFullYear(),D.getMonth(),D.getDate()+4);else y=D;x=D.getTime(),Y=(new Date).getTime();if(x>=Y)D.setDate(D.getDate()+6);else{F="第"+v+"周 "+(y.getMonth()+1)+"."+y.getDate()+"~";if(D.setDate(D.getDate()+6),D<b){z=D.getMonth()+1+"."+D.getDate();D.setDate(D.getDate()+1)}else b.setDate(b.getDate()+1),z=b.getMonth()+1+"."+b.getDate();g.push(F+z)}}if(g.length>12)return t.showLoading({title:"最多选择12周",mask:!1,duration:2e3,icon:"none"}),this.data_alltime_week=[],!1;if(i<h){M=i+"-W"+d,k=i+d+"周",T=l.split("-W"),L=T[0],A=T[1];L<=i?A<=d||(M=i+"-W"+d,l=l,k=u,u=i+g+"周"):(console.log("! start_week <= wek"),M=i+"-W"+d,l=l,k=u,u=i+g+"周"),u=l.replace("-W","-")+"周",k=M.replace("-W","-")+"周",this.start_day=l,this.end_day=M,this.start_days=u,this.end_days=k,this.Data_select_header=!0,this.click_num=2,this.active_z=-1,f="/topprogram/cinema-main",p={cinema_code:o,dtype:"week",with_fwf:1,start_date:l,end_date:M},this.cinema_data(f,this,p),setTimeout(this.getData,500)}else if(i==h){M=i+"-W"+d,k=i+d+"周",T=l.split("-W"),L=T[0],A=T[1];L<=i?A<=d||(M=l,l=u,k=i+"-W"+d,u=i+d+"周"):(M=i+"-W"+d,l=l,k=u,u=i+d+"周"),u=l.replace("-W","-")+"周",k=M.replace("-W","-")+"周",this.start_day=l,this.end_day=M,this.start_days=u,this.end_days=k,this.Data_select_header=!0,this.click_num=2,this.active_z=-1;f="/topprogram/cinema-main";p={cinema_code:o,dtype:"week",with_fwf:1,start_date:l,end_date:M},s.cinema_data(f,s,p),setTimeout(s.getData,500)}}return this.data_alltime_week=[],!1}this.data_alltime_week=r},click_year:function(t,e){var a=[],i=0,o=new Date(t,0,1);while(1!=o.getDay())o.setDate(o.getDate()+1);var n=new Date(t+1,0,1);while(1!=n.getDay())n.setDate(n.getDate()+1);for(var s=1,r=o;r<n;s++){if(1==i)var _=new Date(r.getFullYear(),r.getMonth(),r.getDate()+4);else _=r;var d=r.getTime(),l=(new Date).getTime();if(d>=l)r.setDate(r.getDate()+6);else{var c="第"+s+"周 "+(_.getMonth()+1)+"."+_.getDate()+"~";if(r.setDate(r.getDate()+6),r<n){var m=r.getMonth()+1+"."+r.getDate();r.setDate(r.getDate()+1)}else n.setDate(n.getDate()+1),m=n.getMonth()+1+"."+n.getDate();a.push(c+m)}}this.curren=e,this.is_year=t,this.week=a},ei_calendar_tap:function(e){var a=this.code;if(this.data_alltime instanceof Array)var i=this.data_alltime;else i=[];var o="",s=e.year+"",r=e.month+"",_=e.day+"";_.length>=2&&Number(_)<10&&(_=_.slice(1)),2==r.length&&Number(r)<10&&(r=r.slice(1)),r<10&&(r="0"+r),_<10&&(_="0"+_),o=s+"-"+r+"-"+_,i.push(new Date(o).getTime());var d=(new Date).getTime();if(i[i.length-1]>d)return t.showToast({title:"最大日期为今天",duration:2e3,icon:"none"}),this.data_alltime=[],!1;if(2==i.length){var l="",c={};if(i[0]==i[1]){var m=(0,n.default)(i[0]).format("YYYY-MM-DD"),h=(0,n.default)(i[1]).format("YYYY-MM-DD");l="/topprogram/cinema-main",c={cinema_code:a,dtype:"range",with_fwf:1,start_date:h,end_date:m},this.cinema_data(l,this,c),this.start_day=h,this.end_day=m,this.Data_select_header=!0,this.click_num=1,this.time_tab_Br=!1,setTimeout(this.getData,500)}if(i[0]-i[1]>0){var u=(i[0]-i[1])/1e3/60/60/24;m=(0,n.default)(i[0]).format("YYYY-MM-DD"),h=(0,n.default)(i[1]).format("YYYY-MM-DD");if(console.log(h),console.log(m),!(u<92))return t.showLoading({title:"最大日期为92天",duration:2e3,icon:"none"}),!1;l="/topprogram/cinema-main",c={cinema_code:a,dtype:"range",with_fwf:1,start_date:h,end_date:m},this.cinema_data(l,this,c),this.start_day=h,this.end_day=m,this.Data_select_header=!0,this.click_num=1,this.time_tab_Br=!1,setTimeout(this.getData,500)}else if(i[1]-i[0]>0){u=(i[1]-i[0])/1e3/60/60/24,m=(0,n.default)(i[1]).format("YYYY-MM-DD"),h=(0,n.default)(i[0]).format("YYYY-MM-DD");if(!(u<92))return t.showLoading({title:"最大日期为92天",duration:2e3,icon:"none"}),!1;l="/topprogram/cinema-main",c={cinema_code:a,dtype:"range",with_fwf:1,start_date:h,end_date:m},this.cinema_data(l,this,c),this.start_day=h,this.end_day=m,this.Data_select_header=!0,this.click_num=1,this.time_tab_Br=!1,setTimeout(this.getData,500)}return this.data_alltime=[],!1}this.data_alltime=i},child_tap:function(){this.Data_select_header=!1,0==this.time_tab?this.time_tab_Br=!0:this.time_tab_Br=!1},click_tab:function(t){this.time_tab_Br=0==t,this.time_tab=t},disabledDate:function(t){var e=new Date("2019/5/10").getTime(),a=new Date("2019/7/21").getTime();return t.getTime()<=e||t.getTime()>=a},z_data:function(){for(var t=[],e=[],a=(0,n.default)(new Date).add(0,"year").format("YYYY")-0,i=0,o=new Date(a,0,1),s=a;s>=2012;s--)e.push(s);while(1!=o.getDay())o.setDate(o.getDate()+1);var r=new Date(a+1,0,1);while(1!=r.getDay())r.setDate(r.getDate()+1);s=1;for(var _=o;_<r;s++){if(1==i)var d=new Date(_.getFullYear(),_.getMonth(),_.getDate()+4);else d=_;var l=_.getTime(),c=(new Date).getTime();if(l>=c)_.setDate(_.getDate()+6);else{var m="第"+s+"周 "+(d.getMonth()+1)+"."+d.getDate()+"~";if(_.setDate(_.getDate()+6),_<r){var h=_.getMonth()+1+"."+_.getDate();_.setDate(_.getDate()+1)}else r.setDate(r.getDate()+1),h=r.getMonth()+1+"."+r.getDate();t.push(m+h)}}this.is_year=e[0],this.week=t,this.year=e},showRing_tow:function(e,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";y=new o.default({$this:w,canvasId:e,type:"ring",fontSize:11,legend:{show:!1},title:{name:n,color:s,fontSize:25*w.pixelRatio},subtitle:{name:i,color:"#666666",fontSize:18*w.pixelRatio},extra:{pie:{offsetAngle:-45,ringWidth:40*w.pixelRatio,lableWidth:15}},background:"#FFFFFF",pixelRatio:w.pixelRatio,series:a.series,animation:!0,width:t.upx2px(750)*w.pixelRatio,height:t.upx2px(500)*w.pixelRatio,disablePieStroke:!0,dataLabel:!1})},touchRing_tow:function(t){var e=y.getCurrentDataIndex(t);if(e>=0){var a=this.tathreecan_num,i=y.opts.series[e].name,o=y.opts.series[e].data-0;o=(o/a*100).toFixed(1)+"%";var n=y.opts.series[e].color;y.updateData({title:{name:o,color:n},subtitle:{name:i}})}},showRing:function(e,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";D=new o.default({$this:w,canvasId:e,type:"ring",fontSize:11,legend:{show:!1},title:{name:n,color:s,fontSize:25*w.pixelRatio},subtitle:{name:i,color:"#666666",fontSize:18*w.pixelRatio},extra:{pie:{offsetAngle:-45,ringWidth:40*w.pixelRatio,lableWidth:15}},background:"#FFFFFF",pixelRatio:w.pixelRatio,series:a.series,animation:!0,width:t.upx2px(750)*w.pixelRatio,height:t.upx2px(500)*w.pixelRatio,disablePieStroke:!0,dataLabel:!1})},touchRing:function(t){var e=D.getCurrentDataIndex(t);if(e>=0){var a=this.tatowcan_num,i=D.opts.series[e].name,o=D.opts.series[e].data-0;o=(o/a*100).toFixed(1)+"%";var n=D.opts.series[e].color;D.updateData({title:{name:o,color:n},subtitle:{name:i}})}},show_index:function(){this.is_index=!1},more_index_header_click:function(){w.is_index=!0},showArea:function(e,a){b=new o.default({$this:w,canvasId:e,type:"area",fontSize:11,legend:{show:!1},dataLabel:!1,dataPointShape:!0,background:"#FFFFFF",pixelRatio:w.pixelRatio,categories:a.categories,series:a.series,animation:!0,enableScroll:!0,xAxis:{type:"grid",gridColor:"#CCCCCC",gridType:"dash",dashLength:8,itemCount:7,scrollShow:!0,scrollAlign:"right",disableGrid:!0},yAxis:{gridType:"solid",gridColor:"#CCCCCC",dashLength:5,splitNumber:5,min:0,max:5},width:t.upx2px(750)*w.pixelRatio,height:t.upx2px(500)*w.pixelRatio,extra:{area:{type:"curve",opacity:.2,addLine:!0,width:2}}})},moveLineA:function(t){b.scroll(t)},touchEndLineA:function(t){b.scrollEnd(t)},touchArea:function(t){b.scrollStart(t);var e=b.getCurrentDataIndex(t),a=r(w.categories_s),i=a[e];b.showToolTip(t,{format:function(t,e){return i+"： "+t.data+"万"}})},cinema_data:function(){var t=p(i.default.mark(function t(e,a,o){var n,s,r,_,d,l,c,m,h;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.detection_validity();case 2:return n=t.sent,o["userType"]=n,t.next=6,this.$http.get({url:e,data:o});case 6:for(l in s=t.sent,r=s.data,r.realtime_data.total_bo_s=(r.realtime_data.total_bo_s-0).toFixed(0),_=this.start_day,d=this.end_day,""!==_||("NaN周"==_?(console.log(r.params.start_date),_=r.params.start_date):_=r.params.start_date),d=""!==d?d:r.params.end_date,r.cinemalist_data)r.cinemalist_data[l].total_bo_s=(r.cinemalist_data[l].total_bo_s/1e4).toFixed(2),r.cinemalist_data[l].people_per_session=(r.cinemalist_data[l].people_per_session-0).toFixed(0),r.cinemalist_data[l].avg_price=(r.cinemalist_data[l].avg_price-0).toFixed(1),Number(r.cinemalist_data[l].ol_total_bo_s)/1e4-0>0?r.cinemalist_data[l].ol_total_bo_s=(Number(r.cinemalist_data[l].ol_total_bo_s)/1e4-0).toFixed(2):r.cinemalist_data[l].ol_total_bo_s="--",100*Number(r.cinemalist_data[l].ol_total_rate)>0?r.cinemalist_data[l].ol_total_rate=(100*Number(r.cinemalist_data[l].ol_total_rate)).toFixed(2):r.cinemalist_data[l].ol_total_rate="--",Number(r.cinemalist_data[l].ol_people_s)/1e4-0?r.cinemalist_data[l].ol_people_s=(Number(r.cinemalist_data[l].ol_people_s)/1e4-0).toFixed(2):r.cinemalist_data[l].ol_people_s="--",100*Number(r.cinemalist_data[l].ol_people_rate)?r.cinemalist_data[l].ol_people_rate=(100*Number(r.cinemalist_data[l].ol_people_rate)).toFixed(2):r.cinemalist_data[l].ol_people_rate="--",r.cinemalist_data[l].avg_seats_income=(r.cinemalist_data[l].avg_seats_income-0).toFixed(0),r.cinemalist_data[l].city_total=(r.cinemalist_data[l].city_total/1e4).toFixed(2),r.cinemalist_data[l].city_zb=(r.cinemalist_data[l].total_bo_s/r.cinemalist_data[l].city_total*100).toFixed(2),r.cinemalist_data[l].cj_total=(1e4*r.cinemalist_data[l].total_bo_s/r.cinemalist_data[l].session_s).toFixed(2),r.cinemalist_data[l].avg_hall_income=(r.cinemalist_data[l].avg_hall_income/1e4).toFixed(2),c="",c=0==r.cinemalist_data[l].local_rank?"-":r.cinemalist_data[l].local_rank,r.cinemalist_data[l].local_rank=c;m=[],m[0]=d,m[1]=_,this.date=m,h=[],3==this.click_num?(r.cinemalist_data.forEach(function(t,e){t.bdate=t.bdate.slice(0,7),h.push(t)}),this.cinemalist_data=h):this.cinemalist_data=r.cinemalist_data,console.log(h),this.cinema_data_data=r.cinema_data,this.realtime_data=r.realtime_data,this.start_day=_,this.end_day=d,console.log(this.click_num);case 26:case"end":return t.stop()}},t,this)}));function e(e,a,i){return t.apply(this,arguments)}return e}(),getData:function(){var t=p(i.default.mark(function t(){var e,a,o,n,s,r,_,d,l,c,m,h,u,f,p=this;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,a=e.start_day,o=e.end_day,n=e.code,s=e.time_tab,r="",r=0==s?"range":1==s?"week":2==s?"month":"year",_="/topprogram/cinema-main",t.next=10,this.detection_validity();case 10:return d=t.sent,l={cinema_code:n,dtype:r,with_fwf:1,start_date:a,end_date:o,userType:d},t.next=14,this.$http.get({url:_,data:l,contentType:"application/x-www-form-urlencoded"});case 14:for(h in c=t.sent,m=c.data,m.cinema_js.total)m.cinema_js.total[h]=(m.cinema_js.total[h]/1e4).toFixed(1);u={categories:[],series:[{color:"#F08E2D",name:"票房趋势",data:[]}]},f=[],m.cinema_js.xA.forEach(function(t,e){f.push(t+"周"),1==p.click_num?(t=t.slice(8),u.categories.push(t)):2==p.click_num?u.categories.push(t):3==p.click_num?u.categories.push(t):4==p.click_num&&u.categories.push(t)}),m.cinema_js.total.forEach(function(t,e){u.series[0]["data"].push(Number(t))}),w.categories_s=f,w.showArea("canvasArea",u);case 23:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),center_header_click:function(t){var e=this.code,a=this,i=[{zb_name:"分账票房(万元)",id:0,front_row:!0},{zb_name:"人次",id:1,front_row:!0},{zb_name:"场次",id:2,front_row:!0},{zb_name:"场均人次",id:3,front_row:!0},{zb_name:"平均票价",id:4,front_row:!1},{zb_name:"本地排名",id:5,front_row:!1},{zb_name:"城市票房占比",front_row:!1},{zb_name:"网售票房",front_row:!1},{zb_name:"网售票房占比",front_row:!1},{zb_name:"网售人次",front_row:!1},{zb_name:"网售人次占比",front_row:!1},{zb_name:"单座票房",front_row:!1},{zb_name:"场均票房",front_row:!1},{zb_name:"单银幕票房",front_row:!1}],o=[{zb_name:"实时票房",id:0,front_row:!0},{zb_name:"人次",id:1,front_row:!0},{zb_name:"场次",id:2,front_row:!0},{zb_name:"场均人次",id:3,front_row:!0},{zb_name:"平均票价",id:4,front_row:!1},{zb_name:"上座率",id:5,front_row:!1},{zb_name:"票房占比",front_row:!1},{zb_name:"排场占比",front_row:!1},{zb_name:"排座占比",front_row:!1},{zb_name:"网售票房",front_row:!1},{zb_name:"网售票房占比",front_row:!1},{zb_name:"网售人次",front_row:!1},{zb_name:"网售人次占比",front_row:!1},{zb_name:"累计票房",front_row:!1}],s=[{zb_name:"场次",id:0,front_row:!0},{zb_name:"排场占比",id:1,front_row:!0},{zb_name:"排座数",id:2,front_row:!0},{zb_name:"排座占比",id:3,front_row:!0},{zb_name:"黄金场场次",id:4,front_row:!1},{zb_name:"黄金场占比",id:5,front_row:!1}],r="",_={};if(0==t){this.zb_title=i;var d="",l="";r="/topprogram/cinema-main",_={cinema_code:e,dtype:"range",with_fwf:1,start_date:d,end_date:l},this.cinema_data(r,this,_),this.start_day="",this.end_day="",this.click_num=1,this.time_tab=0,setTimeout(this.getData,500)}else if(1==t){var c=(0,n.default)().format("YYYY-MM-DD");a.pf_date;r="/topprogram/cinema-movie",_={cinema_code:e,dtype:"range",start_date:c,end_date:""},a.pf_index(r,a,_),this.zb_title=o,this.pf_date=c,this.pf_date_data=(0,n.default)(c).format("YYYY年MM月DD日"),this.pf_dates="",this.time_dd=0,setTimeout(a.getData_two,500)}else{c=(0,n.default)().format("YYYY-MM-DD");r="/topprogram/cinema-movie",_={cinema_code:e,dtype:"range",start_date:c,end_date:""},this.pp_index(r,a,_),this.zb_title=s,this.pp_date=c,this.date_three=[new Date(c)],this.pp_date_data=(0,n.default)(c).format("YYYY年MM月DD日"),setTimeout(this.getData_three,500)}this.center_header_index=t},getData_three:function(){var t=p(i.default.mark(function t(){var e,a,o,n,s,r,_,d,l,c,m,h;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this,e=this.code,a=this.pp_date,o="/topprogram/cinema-movie",t.next=6,this.detection_validity();case 6:return n=t.sent,s={cinema_code:e,dtype:"range",start_date:a,end_date:a,userType:n},t.next=10,this.$http.get({url:o,data:s,contentType:"application/x-www-form-urlencoded"});case 10:for(m in r=t.sent,_=r.data,d=["#FF5850","#3D8FF5","#2CC7FF","#1DD6D9","#34CC68","#88DC2B","#FDF000","#fdad00","#f87a01","#d22f0e","#CDAD00"],l={series:[{name:"",color:"",data:""},{name:"",color:"",data:""},{name:"",color:"",data:""},{name:"",color:"",data:""},{name:"",color:"",data:""},{name:"",color:"",data:""},{name:"",color:"",data:""},{name:"",color:"",data:""},{name:"",color:"",data:""},{name:"",color:"",data:""},{name:"",color:"",data:""}]},_.movie_data_js.xA.forEach(function(t,e){t.length>5&&(t=t.slice(0,5)+"..."),l.series[e]["name"]=t,l.series[e]["data"]=_.movie_data_js.total[e]-0,l.series[e]["color"]=d[e]}),c=0,l.series)c+=l.series[m].data-0;h=l.series[0].data/c*100,w.showRing_tow("canvasRing_tow",l,l.series[0].name,h.toFixed(1),l.series[0].color),this.tathreecan_num=c;case 20:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),pp_index:function(){var t=p(i.default.mark(function t(e,a,o){var s,r,_,d,l,c,m,h,u;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.detection_validity();case 2:return s=t.sent,o["userType"]=s,t.next=6,this.$http.get({url:e,data:o});case 6:for(m in r=t.sent,_=r.data,Number(_.sum_data.total_bo_s)/1e8>1?_.sum_data.total_bo_s=Number(_.sum_data.total_bo_s)/1e8+"亿":_.sum_data.total_bo_s=Number(_.sum_data.total_bo_s)/1e4+"万",d=this.pp_date,l=(0,n.default)(d).format("YYYY-MM-DD"),c=new Date(l).getTime(),_.movie_data)_.movie_data[m].bos/1e8>1?_.movie_data[m].bos=(_.movie_data[m].bos/1e8-0).toFixed(2)+"亿":_.movie_data[m].bos/1e4>1?_.movie_data[m].bos=(_.movie_data[m].bos/1e4).toFixed(2)+"万":_.movie_data[m].bos=(_.movie_data[m].bos-0).toFixed(0),_.movie_data[m].gd_session_rate=(Number(_.movie_data[m].gd_session)/Number(_.sum_data.gd_session_s)*100).toFixed(2),_.movie_data[m].occupancy=(100*_.movie_data[m].occupancy).toFixed(2),_.movie_data[m].pc_zb=(_.movie_data[m].session_s/_.sum_data.session_s*100).toFixed(2),_.movie_data[m].pz_zb=(Number(_.movie_data[m].total_seats_s)/Number(_.sum_data.total_seats_s)*100).toFixed(2),h=new Date(_.movie_data[m].publish_date).getTime(),u=(c-h)/1e3/60/60/24,_.movie_data[m].publish_date=0==u?"首映":"上映".concat(u,"天");this.pp_sum_list=_.sum_data,this.pp_list=_.movie_data;case 15:case"end":return t.stop()}},t,this)}));function e(e,a,i){return t.apply(this,arguments)}return e}(),pf_index:function(){var e=p(i.default.mark(function e(a,o,s){var r,_,d,l,c,m,h,u,f;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.detection_validity();case 2:return r=e.sent,s["userType"]=r,e.next=6,this.$http.get({url:a,data:s});case 6:for(h in _=e.sent,d=_.data,t.showLoading({title:"数据加载中"}),l=this.pf_date,c=(0,n.default)(l).format("YYYY-MM-DD"),m=new Date(c).getTime(),d.movie_data)d.movie_data[h].bos/1e8>1?d.movie_data[h].bos=(d.movie_data[h].bos/1e8-0).toFixed(2)+"亿":d.movie_data[h].bos/1e4>1?d.movie_data[h].bos=(d.movie_data[h].bos/1e4).toFixed(2)+"万":d.movie_data[h].bos=(d.movie_data[h].bos-0).toFixed(0),d.movie_data[h].people_per_session=(d.movie_data[h].people_per_session-0).toFixed(0),d.movie_data[h].avg_price=(1*d.movie_data[h].avg_price).toFixed(1),d.movie_data[h].ol_total_bo_s=(d.movie_data[h].ol_total_bo_s/1e4-0).toFixed(2),d.movie_data[h].ol_total_rate=(100*d.movie_data[h].ol_total_rate).toFixed(2),d.movie_data[h].ol_people_s=(d.movie_data[h].ol_people_s/1e4-0).toFixed(2),d.movie_data[h].ol_people_rate=(100*d.movie_data[h].ol_people_rate).toFixed(2),d.movie_data[h].occupancy=(100*d.movie_data[h].occupancy).toFixed(2),d.movie_data[h].pc_zb=(d.movie_data[h].session_s/d.sum_data.session_s*100).toFixed(2),d.movie_data[h].pz_zb=(d.movie_data[h].total_seats_s/d.sum_data.total_seats_s*100).toFixed(2),d.movie_data[h].pf_zb=(Number(d.movie_data[h].total_bo_s)/Number(d.sum_data.total_bo_s)*100).toFixed(2),d.movie_data[h].total_bo_s/1e8>1?d.movie_data[h].total_bo_s=(d.movie_data[h].total_bo_s/1e8).toFixed(2)+"亿":d.movie_data[h].total_bo_s/1e4>1?d.movie_data[h].total_bo_s=(d.movie_data[h].total_bo_s/1e4).toFixed(2)+"万":d.movie_data[h].total_bo_s=(d.movie_data[h].total_bo_s-0).toFixed(0),d.movie_data[h].total_people_s/1e8>1?d.movie_data[h].total_people_s=(d.movie_data[h].total_people_s/1e8).toFixed(2)+"亿":d.movie_data[h].total_people_s/1e4>1?d.movie_data[h].total_people_s=(d.movie_data[h].total_people_s/1e4).toFixed(2)+"万":d.movie_data[h].total_people_s=(d.movie_data[h].total_people_s-0).toFixed(0),u=new Date(d.movie_data[h].publish_date).getTime(),f=(m-u)/1e3/60/60/24,d.movie_data[h].publish_date=0==f?"首映":"上映".concat(f,"天");this.pf_list_sum=d.sum_data,this.pf_list=d.movie_data,t.hideLoading();case 16:case"end":return e.stop()}},e,this)}));function a(t,a,i){return e.apply(this,arguments)}return a}(),getData_two:function(){var t=p(i.default.mark(function t(){var e,a,o,n,s,r,_,d,l,c,m,h,u,f;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,a=e.code,o=e.pf_date,n=e.pf_dates,s=e.time_dd,r="",_={},0==s?(r="/topprogram/cinema-movie",_={cinema_code:a,dtype:"range",start_date:o,end_date:n}):1==s?(r="/topprogram/cinema-movie",_={cinema_code:a,dtype:week,week:o}):2==s?(r="/topprogram/cinema-movie",_={cinema_code:a,dtype:"month",month:o}):(r="/topprogram/cinema-movie",_={cinema_code:a,dtype:year,year:o}),t.next=10,this.$http.get({url:r,data:_,contentType:"application/x-www-form-urlencoded"});case 10:for(u in d=t.sent,l=d.data,c=["#FF5850","#3D8FF5","#2CC7FF","#1DD6D9","#34CC68","#88DC2B","#FDF000","#fdad00","#f87a01","#d22f0e","#CDAD00"],m={series:[{name:"",color:"",data:""},{name:"",color:"",data:""},{name:"",color:"",data:""},{name:"",color:"",data:""},{name:"",color:"",data:""},{name:"",color:"",data:""},{name:"",color:"",data:""},{name:"",color:"",data:""},{name:"",color:"",data:""},{name:"",color:"",data:""},{name:"",color:"",data:""}]},l.movie_data_js.xA.forEach(function(t,e){t.length>5&&(t=t.slice(0,5)+"..."),m.series[e]["name"]=t,m.series[e]["data"]=l.movie_data_js.total[e]-0,m.series[e]["color"]=c[e]}),h=0,m.series)h+=m.series[u].data-0;f=m.series[0].data/h*100,w.showRing("canvasRing",m,m.series[0].name,f.toFixed(1)+"%",m.series[0].color),this.tatowcan_num=h;case 20:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),more_index_data_tap:function(e){var a=r(this.zb_title);if(a[e].front_row)return a[e].front_row=!1,this.zb_title=a,!1;for(var i=0,o=0;o<a.length-1;o++)if(a[o].front_row&&(0===i?i=1:1===i?(console.log("boer == 1"),i=2):2===i?(console.log("boer == 2"),i=3):3===i&&(console.log("boer == 3"),i=4)),4==i)return console.log("boer == 4"),t.showToast({title:"最多选择四项",duration:2e3,icon:"none"}),!1;i<4&&(a[e].front_row=!0),this.zb_title=a,this.zb_title=a}}};e.default=x}).call(this,a("543d")["default"])}},[["d5d5","common/runtime","common/vendor"]]]);
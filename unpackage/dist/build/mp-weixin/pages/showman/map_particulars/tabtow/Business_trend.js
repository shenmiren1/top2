(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/showman/map_particulars/tabtow/Business_trend"],{1820:function(t,e,a){"use strict";a.r(e);var i=a("356d3"),n=a.n(i);for(var r in i)"default"!==r&&function(t){a.d(e,t,function(){return i[t]})}(r);e["default"]=n.a},"2c04":function(t,e,a){"use strict";var i=a("8516"),n=a.n(i);n.a},"356d3":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,n=h(a("a34a")),r=a("2f62"),s=h(a("2f71")),o=h(a("86fc"));a("b824");function h(t){return t&&t.__esModule?t:{default:t}}function d(t,e,a,i,n,r,s){try{var o=t[r](s),h=o.value}catch(d){return void a(d)}o.done?e(h):Promise.resolve(h).then(i,n)}function c(t){return function(){var e=this,a=arguments;return new Promise(function(i,n){var r=t.apply(e,a);function s(t){d(r,i,n,s,o,"next",t)}function o(t){d(r,i,n,s,o,"throw",t)}s(void 0)})}}function l(t){return f(t)||u(t)||_()}function _(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function f(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),i.forEach(function(e){p(t,e,a[e])})}return t}function p(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var y=null,g={data:function(){return{data_year:"",dq_data:"",start_day:"",end_day:"",festival_title:[],year_data:[],year_index:-1,ALL_month_index:-1,is_year:2019,ALL_month:[],curren:0,month:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],year:[],time_tab:0,time_isshow:!1,All_name:[],bottom_data:[],dtype:"month",select_isShow_time:!1,Cinema_person_time:["按月","按年","档期"],city_index:2,city_data:["--","--","三公里","一公里"],header_data_data:["票房","按月","--","影院选择"],All_data:[],CinemaClick_isShow:!0,select_isShow:!1,Cinema_person:["票房","人次"],code_data:[],cWidth:"",cHeight:"",pixelRatio:1,textarea:"",index_search:0}},computed:m({},(0,r.mapState)({header_index:"map_particulars_tabtow_header_index",res:"map_particulars_res"})),watch:{header_index:function(){if(2==this.header_index){var e=this.res,a=e.city,n=e.district,r=e.latitude,o=e.longitude,h="/topprogram/compete-operate?dtype=month&lat="+r+"&lng="+o,d=l(this.city_data);d[0]=a,d[1]=n,this.city_data=d,i=this,this.cWidth=t.upx2px(750),this.cHeight=t.upx2px(700),this.city_index=2;for(var c=(0,s.default)().format("YYYY"),_=[],u=Number(c);u>=2012;u--)_.push(u);this.year=_,this.dq_timeData(),this.bd_index(h)}},code_data:function(){var t=this.index_search;this.ucharts_sear_data(t)}},methods:{tabthree_dq_tap:function(t,e){var a=l(this.header_data_data);a[2]=t;var i=this.dtype,n=this.res,r=(n.city,n.district,n.latitude),s=n.longitude,o="/topprogram/compete-operate?dtype=month&lat="+r+"&lng="+s+"&schedule="+e+"&dtype="+i;this.dq_data=e,this.bd_index(o),this.header_data_data=a,this.time_isshow=!1},check_year:function(e,a){if(this.year_data instanceof Array)var i=this.year_data;else i=[];if(i.push(Number(e)),1==i.length&&t.showToast({title:"请选择结束年",icon:"none",mask:!0,duration:2e3}),this.year_data=i,this.year_index=a,2==i.length){if(i[0]==i[1])return t.showToast({title:"请勿选择同一年",icon:"none",mask:!0,duration:2e3}),this.year_data=i[0],!1;this.code;if(i[0]>i[1]){var n=i[0],r=i[1],s=l(this.header_data_data);s[2]=r+"年-"+n+"年";var o=this.dtype,h=this.res,d=h,c=(d.city,d.district,d.latitude),_=d.longitude,u="/topprogram/compete-operate?dtype=month&lat="+c+"&lng="+_+"&year_ar="+r+","+n+"&dtype="+o;this.data_year=r+","+n,this.bd_index(u),i.length=0,this.year_data=i,this.time_isshow=!1,this.year_index=-1}else if(i[1]>i[0]){n=i[1],r=i[0],s=l(this.header_data_data);s[2]=r+"年-"+n+"年";o=this.dtype,h=this.res;var f=h,m=(f.city,f.district,f.latitude),p=f.longitude;u="/topprogram/compete-operate?dtype=month&lat="+m+"&lng="+p+"&year_ar="+r+","+n+"&dtype="+o;this.bd_index(u),this.data_year=r+","+n,i.length=0,this.year_data=i,this.time_isshow=!1,this.year_index=-1}}},tap_year:function(t,e){var a=t,i=new Date(a,0,1);while(1!=i.getDay())i.setDate(i.getDate()+1);var n=new Date(a+1,0,1);while(1!=n.getDay())n.setDate(n.getDate()+1);this.is_year=a,console.log(e),this.curren=e},check_month:function(e,a){if(3==e.length)var i=Number(e.slice(0,2));else i=Number(e.slice(0,1));if(this.ALL_month instanceof Array)var n=l(this.ALL_month);else n=[];(0,s.default)();var r=i,o=this.is_year-0;if(0==n.length){var h=new Date(o+"-"+r+"-01").getTime();if(n[0]==h)return t.showToast({title:"请勿点击同一月",duration:2e3,icon:"none"}),this.ALL_month=n[0],!1;t.showToast({title:"请选择结束月",duration:2e3,icon:"none"})}if(n.push(new Date(o+"-"+r+"-01").getTime()),this.ALL_month_index=a,this.ALL_month=n,console.log(n),2==n.length){this.code;if(n[0]>n[1]){var d=new Date(n[0]),c=new Date(n[1]),_=0,u=[];console.log(c);for(var f=c;f<d;_++)u.push((0,s.default)(f).format("YYYY-MM")),f.setMonth(f.getMonth()+1);if(u.length>12)return t.showToast({title:"最多选择12个月"}),this.ALL_month=n[0],!1;var m=(0,s.default)(new Date(n[1])).format("YYYY-MM"),p=(0,s.default)(new Date(n[0])).format("YYYY-MM"),y=(0,s.default)(new Date(n[1])).format("YYYY年-MM月"),g=(0,s.default)(new Date(n[0])).format("YYYY年-MM月"),v=l(this.header_data_data);v[2]=g+"-"+y;var w=this.dtype,x=this.res,b=x,A=(b.city,b.district,b.latitude),Y=b.longitude,L="/topprogram/compete-operate?dtype=month&lat="+A+"&lng="+Y+"&month="+m+"&month_end="+p+"&dtype="+w;this.bd_index(L),this.header_data_data=v,this.start_day=m,this.end_day=p,this.ALL_month_index=-1,n.length=0,this.ALL_month=n,this.is_year=2019,this.curren=0,this.time_isshow=!1}else if(n[1]>n[0]){d=new Date(n[1]),c=new Date(n[0]),_=0,u=[];console.log(c);for(f=c;f<d;_++)u.push((0,s.default)(f).format("YYYY-MM")),f.setMonth(f.getMonth()+1);if(u.length>12)return t.showToast({title:"最多选择12个月"}),this.ALL_month=n[0],!1;m=(0,s.default)(new Date(n[0])).format("YYYY-MM"),p=(0,s.default)(new Date(n[1])).format("YYYY-MM"),g=(0,s.default)(new Date(n[0])).format("YYYY年-MM月"),y=(0,s.default)(new Date(n[1])).format("YYYY年-MM月"),v=l(this.header_data_data);v[2]=g+"-"+y;w=this.dtype,x=this.res;var D=x,M=(D.city,D.district,D.latitude),S=D.longitude;L="/topprogram/compete-operate?dtype=month&lat="+M+"&lng="+S+"&month="+m+"&month_end="+p+"&dtype="+w;this.bd_index(L),this.start_day=m,this.end_day=p,this.header_data_data=v,this.ALL_month_index=-1,n.length=0,this.ALL_month=n,this.is_year=2019,this.curren=0,this.time_isshow=!1}}},city_click:function(t,e){var a=this.res,i=this.dtype,n=(a.city,a.district,a.latitude),r=a.longitude,s="/topprogram/compete-operate?lan="+n+"&lng="+r+"&dtype="+i;if(2==t?e=3e3:3==t&&(e=1e3),0==t){if(-1!=e.indexOf("市")||-1!=e.indexOf("省")){var o=e.indexOf("市");e=e.slice(0,o)}s+="&distance_meters=city,"+e}else s+=1==t?"&distance_meters=county,"+e:"&distance_meters="+e;if("month"==i){var h=this.start_day,d=this.end_day;s+="&month="+h+"&monthend="+d}else if("year"==i){var c=this.data_year;s+="&year_ar="+c}else if("schedule"==i){var l=this.dq_data;s+="&schedule="+l}this.bd_index(s),this.city_index=t},Cinema_select_time_click:function(t,e){var a=this.res,i=(a.city,a.district,a.latitude),n=a.longitude,r="/topprogram/compete-operate?lat="+i+"&lng="+n,s="";if(0==e)r+="&dtype=month",s="month";else if(1==e)r+="&dtype=year",s="year";else{r+="&dtype=schedule",s="schedule";var o=l(this.header_data_data);o[2]="元旦节",this.header_data_data=o}this.time_tab=e,this.dtype=s;o=l(this.header_data_data);o[1]=t,this.header_data_data=o,this.select_isShow_time=!1,this.bd_index(r)},showLineA:function(t,e){var a=this;y=new o.default({$this:i,canvasId:t,type:"line",fontSize:11,padding:[15,15,0,15],legend:{fontSize:12,show:!0,padding:10,itemGap:10,lineHeight:24,margin:5},dataLabel:!1,dataPointShape:!1,dataPointShapeType:"hollow",background:"#FFFFFF",pixelRatio:i.pixelRatio,categories:e.categories,series:e.series,animation:!0,enableScroll:!0,xAxis:{disableGrid:!0,type:"grid",gridType:"dash",itemCount:4,scrollShow:!0,scrollAlign:"left"},yAxis:{gridType:"solid ",splitNumber:8,min:0,max:10,format:function(t){var e=a.index_search,i="";return 0==e?i="万":1==e&&(i="万"),t.toFixed(0)+i}},width:i.cWidth*i.pixelRatio,height:i.cHeight*i.pixelRatio,extra:{line:{type:"straight"}}})},touchLineA:function(t){y.scrollStart(t)},moveLineA:function(t){y.scroll(t)},touchEndLineA:function(t){y.scrollEnd(t),y.touchLegend(t),y.showToolTip(t,{format:function(t,e){return e+" "+t.name+":"+t.data}})},Cinema_select_click:function(t){var e=l(this.header_data_data);e[0]=t,this.header_data_data=e,this.select_isShow=!1;var a=0;"票房"==t?(a=0,this.ucharts_sear_data(a)):"人次"==t?(a=1,this.ucharts_sear_data(a)):a=2},header_click:function(t){if(3==t){var e=this.CinemaClick_isShow;e=!e,this.CinemaClick_isShow=e,this.select_isShow=!1,this.CinemaClick_isShow=e}else if(0==t){this.CinemaClick_isShow=!0;var a=this.select_isShow;a=!a,this.select_isShow=a}else if(1==t){var i=this.select_isShow_time;this.select_isShow_time=!i}else 2==t&&(this.time_isshow=!0,console.log(t))},Cinema_to_click:function(e){var a=Object.assign({},this.All_data),i=a.cinemaAr,n=(a.data,Object.assign({},this.All_data)),r=l(this.code_data),s=[];if(e.pitch){for(var o=i[e.cinema_code].cinema_code,h=0;h<r.length;h++)r[h].cinema_code!=o&&s.push(r[h]);i[e.cinema_code].pitch=!1}else{var d=0;for(var c in i)i[c].pitch&&d++;if(d>=6)return t.showToast({title:"最多选择6条",icon:"none",duration:2e3}),!1;s=r,i[e.cinema_code].pitch=!0,s.push(i[e.cinema_code])}this.code_data=s,n.cinemaAr=i,this.All_data=n},dq_timeData:function(){var t=c(n.default.mark(function t(){var e,a;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get({url:"/topprogram/get-schedule"});case 2:e=t.sent,a=e.data,this.festival_title=a;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),ucharts_sear_data:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.All_data,a=e.data,n=e.echarts_data,r=l(this.code_data),s={categories:[],series:[]},o=["#88DC2D","#F68C3C","#3E8EF2","#FF574D","#1FD7DC","#E1270B"],h=0;s.categories=n.xAxis_data;var d=[],c=[];r.forEach(function(e,i){for(var n in a){if(n==e.cinema_code){var r=[];if(0==t){for(var l in a[n])r.push(Number(a[n][l].total_bo_s2));c.push(e.cinema_name),s.series.push({name:e.cinema_name,data:r,color:o[h]}),d.push(r)}else if(1==t){for(var _ in a[n])r.push(Number(a[n][_].total_people_s2));c.push(e.cinema_name),s.series.push({name:e.cinema_name,data:r,color:o[h]}),d.push(r)}}h++}}),this.All_name=c,this.bottom_data=d,i.showLineA("canvasLineA",s),this.index_search=t},bd_index:function(){var t=c(n.default.mark(function t(e){var a,i,r,s,o,h,d;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get({url:e});case 2:for(h in a=t.sent,i=a.data,r=this.dtype,s=[],[],o=0,i.cinemaAr)o<=5?(s.push(i.cinemaAr[h]),i.cinemaAr[h].pitch=!0):i.cinemaAr[h].pitch=!1,o++;"schedule"==r||(d=l(this.header_data_data),d[2]=i.echarts_data.xAxis_data[0]+"-"+i.echarts_data.xAxis_data[i.echarts_data.xAxis_data.length-1],this.header_data_data=d),this.code_data=s,this.All_data=i;case 12:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}};e.default=g}).call(this,a("543d")["default"])},"52cb":function(t,e,a){"use strict";a.r(e);var i=a("caf8"),n=a("1820");for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);a("2c04");var s,o=a("f0c5"),h=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"3e24642e",null,!1,i["a"],s);e["default"]=h.exports},8516:function(t,e,a){},caf8:function(t,e,a){"use strict";var i,n=function(){var t=this,e=this,a=e.$createElement;e._self._c;e._isMounted||(e.e0=function(){t.CinemaClick_isShow=!0},e.e1=function(){t.time_isshow=!1})},r=[];a.d(e,"b",function(){return n}),a.d(e,"c",function(){return r}),a.d(e,"a",function(){return i})}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/showman/map_particulars/tabtow/Business_trend-create-component',
    {
        'pages/showman/map_particulars/tabtow/Business_trend-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("52cb"))
        })
    },
    [['pages/showman/map_particulars/tabtow/Business_trend-create-component']]
]);

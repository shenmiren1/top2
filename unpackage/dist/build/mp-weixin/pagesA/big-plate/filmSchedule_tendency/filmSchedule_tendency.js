(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/big-plate/filmSchedule_tendency/filmSchedule_tendency"],{"12b7":function(t,i,e){"use strict";var s,a=function(){var t=this,i=t.$createElement;t._self._c},n=[];e.d(i,"b",function(){return a}),e.d(i,"c",function(){return n}),e.d(i,"a",function(){return s})},"60df":function(t,i,e){},"63fe":function(t,i,e){"use strict";var s=e("60df"),a=e.n(s);a.a},"9cde":function(t,i,e){"use strict";e.r(i);var s=e("bc4e"),a=e.n(s);for(var n in s)"default"!==n&&function(t){e.d(i,t,function(){return s[t]})}(n);i["default"]=a.a},bc4e:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=n(e("a9dd")),a=(e("b824"),n(e("2f71")));function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return h(t)||c(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function h(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}function d(t,i){return _(t)||u(t,i)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(t,i){var e=[],s=!0,a=!1,n=void 0;try{for(var o,r=t[Symbol.iterator]();!(s=(o=r.next()).done);s=!0)if(e.push(o.value),i&&e.length===i)break}catch(c){a=!0,n=c}finally{try{s||null==r["return"]||r["return"]()}finally{if(a)throw n}}return e}function _(t){if(Array.isArray(t))return t}var f,v=function(){return Promise.all([e.e("common/vendor"),e.e("components/ei-calendar/ei-calendar")]).then(e.bind(null,"ca07"))},p=null,m={onShareAppMessage:function(){},components:{EiCalendar:v},data:function(){return{city:"全国",district:"",target:"session ",is_sd:!0,center_frame:0,is_lx:!0,center_frametow:0,disabledDate:[],is_show:!0,inputVal:"",zm_right:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],qy:["全国","一线城市","二线城市","三线城市","四线城市","五线城市"],rm_city:["北京","上海","广州","深圳 ","成都","武汉","重庆","杭州","南京","苏州"],zm_list:[],alpha:"",bangdata:0,isgoldentime:0,date:[],ei_calendar_Br:!1,eventTow_item:[],eventTow_day:[],customDate:[{cellClass:"custom-cell",date:"2019-05-23",top:[{class:"custom-cell-top-1"},{class:"custom-cell-top-2"}]}],startDate:"2019-07-12",endDate:"",check_day:[],condition_title:["6月-28日-7月05日","全国","全时段","场次"],position_canvas:"",top_canvas:"",LineA_all:[],LineA:[],cWidth:"",cHeight:"",pixelRatio:1,textarea:""}},created:function(){var i=this;t.getSystemInfo().then(function(t){i.bangdata=t[1].statusBarHeight}),this.dataMap();var e=(0,a.default)().subtract(0,"days").format("YYYY-MM-DD"),s=(0,a.default)(e).subtract(-8,"days").format("YYYY-MM-DD");console.log(e),console.log(s),this.startDate=e,this.endDate=s;var n=[];n[0]=e,n[1]=s,this.date=n;var o=this.condition_title;o[0]=e+"至"+s},methods:{canvas_repeat:function(i,e){var s=this,a=this.LineA_all.series,n=this.LineA;if(n.series.length>=6){var o=n.series.some(function(t){return t.name==e});if(console.log(o),o){o=!1;var r=[];n.series.forEach(function(t){t.name!=e&&(console.log(t),r.push(t))}),n.series=r,f.showLineA("canvasLineA",n)}else t.showToast({title:"最多添加6条",duration:2e3,icon:"none"})}else a.forEach(function(t,e){if(e==i){var a=s.LineA,n=a.series.findIndex(function(i,e){return i.name==t.name});if(-1!=n||a.series.length>=6){var o=[],r=[];o=a.series.map(function(i,e){if(i.name!=t.name)return i});for(var c=0;c<o.length;c++)void 0!=o[c]&&r.push(o[c]);a.series=r}else a.series.push(t);f.showLineA("canvasLineA",a)}})},ei_calendar_tap:function(i){var e=this.condition_title,s=this.target,a=this.isgoldentime,n=this.check_day,o=this.city,r=this.startDate,c=this.endDate,h=this.eventTow_item,d=this.eventTow_day;i.month<10&&(i.month="0"+i.month),i.day<10&&(i.day="0"+i.day);var l=i.year+"-"+i.month+"-"+i.day;if(h.push(l),d.push(Number(i.day)),this.check_day=n,this.eventTow_item=h,this.eventTow_day=d,2==h.length)if(h[0]>h[1]){c=h[0],r=h[1];var u=d[0]-d[1];if(u>=9)t.showToast({title:"最多选择8天",duration:2e3,icon:"none"}),h=[],d=[],n=[],this.check_day=n,this.eventTow_item=h,this.eventTow_day=d,this.ei_calendar_Br=!1;else{var _="https://db.topcdb.com/topprogram/get-rowpiece-trend?startDate="+r+"&endDate="+c+"&city="+o+"&isgoldentime="+a+"&target="+s;this.uCharts_index(_),e[0]=h[0]+"-"+h[1];var f=[];f[0]=h[0],f[1]=h[1],h=[],d=[],n=[],this.endDate=c,this.startDate=r,this.date=f,this.condition_title=e,this.check_day=n,this.eventTow_item=h,this.eventTow_day=d,this.ei_calendar_Br=!1,this.position_canvas="",this.top_canvas=""}}else{r=h[0],c=h[1];u=d[1]-d[0];if(console.log(d),console.log(d),u>=9)t.showToast({title:"最多选择8天",duration:2e3,icon:"none"}),h=[],d=[],n=[],this.check_day=n,this.eventTow_item=h,this.eventTow_day=d;else{_="https://db.topcdb.com/topprogram/get-rowpiece-trend?startDate="+r+"&endDate="+c+"&city="+o+"&isgoldentime="+a+"&target="+s;this.uCharts_index(_),e[0]=h[0]+"-"+h[1];f=[];f[0]=h[0],f[1]=h[1],h=[],d=[],n=[],this.endDate=c,this.startDate=r,this.date=f,this.condition_title=e,this.check_day=n,this.eventTow_item=h,this.eventTow_day=d,this.ei_calendar_Br=!1,this.position_canvas="",this.top_canvas=""}}},click_lx:function(t,i){var e=this.condition_title;e[3]=t;var s=this.target,a=this.isgoldentime,n=this.startDate,o=this.endDate,r=this.city;s=0==i?"session":"seats";var c="https://db.topcdb.com/topprogram/get-rowpiece-trend?startDate="+n+"&endDate="+o+"&isgoldentime="+a+"&target="+s+"&city="+r;this.uCharts_index(c),this.target=s,this.center_frametow=i,this.is_lx=!0,this.condition_title=e,this.position_canvas="",this.top_canvas=""},click_sd:function(t,i){var e=this.condition_title;e[2]=t;var s=this.target,a=this.isgoldentime,n=this.startDate,o=this.endDate,r=this.city;a=0==i?0:1;var c="https://db.topcdb.com/topprogram/get-rowpiece-trend?startDate="+n+"&endDate="+o+"&isgoldentime="+a+"&target="+s+"&city="+r;this.uCharts_index(c),this.isgoldentime=a,this.is_sd=!0,this.center_frame=i,this.condition_title=e,this.position_canvas="",this.top_canvas=""},click_city:function(t){var i=t,e=this.district,s=this.condition_title;s[1]=t;var a=this.target,n=this.isgoldentime,o=this.startDate,r=this.endDate,c=this.city;-1!=i.indexOf("线城市")||"全国"==i?(e=i,c=""):(e="",c=i);var h="https://db.topcdb.com/topprogram/get-rowpiece-trend?startDate="+o+"&endDate="+r+"&isgoldentime="+n+"&target="+a+"&city="+c+"&district="+e;this.uCharts_index(h),this.is_show=!0,this.city=c,this.condition_title=s,this.position_canvas="",this.top_canvas=""},click_grid:function(t){var i=t,e=this.district,s=this.condition_title;s[1]=t;var a=this.target,n=this.isgoldentime,o=this.startDate,r=this.endDate,c=this.city;-1!=i.indexOf("线城市")?(e=i,c=""):"全国"==i?(c=i,e=""):(e="",c=i);var h="https://db.topcdb.com/topprogram/get-rowpiece-trend?startDate="+o+"&endDate="+r+"&isgoldentime="+n+"&target="+a+"&city="+c+"&district="+e;this.uCharts_index(h),this.is_show=!0,this.city=c,this.condition_title=s,this.position_canvas="",this.top_canvas=""},dataMap:function(){var i=this,e=[];t.showLoading({title:"正在加载中"}),t.request({url:"https://db.topcdb.com/advancedbo/get-citylist",success:function(s){var a=[];for(var n in s)e.push({datas:s[n]});for(var o in e)0!=o&&(delete e[o],e.length=1);for(var r in e[0].datas){var c=[];if("#"!==r){for(var h in e[0].datas[r])c.push(h);a.push({letter:r,childer:c})}}i.zm_list=a,t.hideLoading()},fail:function(){},complete:function(){}})},dddd:function(t){this.alpha=t},header_tap:function(t){var i=t;if(0==i){var e=this.position_canvas,s=this.top_canvas,a=this.ei_calendar_Br;e="absolute",s=-1e3,a=!0,this.ei_calendar_Br=a,this.position_canvas=e,this.top_canvas=s}else if(1==i){e=this.position_canvas,s=this.top_canvas;e="absolute",s=-1e3,this.position_canvas=e,this.top_canvas=s,this.is_show=!1,this.is_sd=!0,this.is_lx=!0}else if(2==i){var n=this.is_sd;if(1==n){this.is_sd=!1,this.is_lx=!0,this.is_show=!0;e=this.position_canvas,s=this.top_canvas;e="absolute",s=-1e3,this.position_canvas=e,this.top_canvas=s}else 0==n&&(this.is_sd=!0,this.position_canvas="",this.top_canvas="")}else if(3==i){var o=this.is_lx;if(o){this.is_lx=!1,this.is_sd=!0,this.is_show=!0;e=this.position_canvas,s=this.top_canvas;e="absolute",s=-1e3,this.position_canvas=e,this.top_canvas=s}else this.is_lx=!0,this.position_canvas="",this.top_canvas=""}},uCharts_index:function(i){var e=this;console.log(i),t.showToast({title:"数据加载中",icon:"loading"}),t.request({url:i}).then(function(i){var s=d(i,2),n=(s[0],s[1]),o=(n.cookies,n.data),r=(n.errMsg,n.header,n.statusCode,o),c=(r.movie_list,n.data.data,{categories:[],series:[]}),h={categories:[],series:[]};for(var l in r.data_list){var u=(0,a.default)(r.data_list[l]).format("MM");console.log(u),h.categories.push(r.data_list[l]),Number(u)>=10?r.data_list[l]=r.data_list[l].slice(5):r.data_list[l]=r.data_list[l].slice(6)}c.categories=r.data_list;var _=["F68C3C","88DC2D","FF574D","FFEF02","3E8EF2","FDD002","2CC6FF","F97902","1FD7DC","E1270B","34CC6B"],v=0,p=r.data;for(var m in p)v++,p[m].movie_name.length>=6&&(p[m].movie_name=p[m].movie_name.slice(0,5)+".."),p[m].name=p[m].movie_name,p[m].color="#"+_[v],p[m].data=p[m].value,delete p[m].movie_name,m>=3||c.series.push(p[m]),h.series.push(p[m]);e.LineA=c,e.LineA_all=h,console.log(h),f.textarea=JSON.stringify(c),console.log(c),f.showLineA("canvasLineA",c),t.hideToast()})},getServerData:function(){this.isgoldentime,this.startDate,this.endDate,this.target,this.city;var t="https://db.topcdb.com/topprogram/get-rowpiece-trend";this.uCharts_index(t)},showLineA:function(t,i){p=new s.default({$this:f,canvasId:t,type:"line",fontSize:11,legend:!1,dataLabel:!1,dataPointShape:!0,background:"#FFFFFF",pixelRatio:f.pixelRatio,categories:i.categories,series:i.series,animation:!0,xAxis:{type:"grid",gridColor:"#CCCCCC",gridType:"dash",dashLength:8},yAxis:{gridType:"dash",gridColor:"#CCCCCC",dashLength:8,splitNumber:10,min:0,max:100,format:function(t){return t+"%"}},width:f.cWidth*f.pixelRatio,height:f.cHeight*f.pixelRatio,extra:{line:{type:"curve"}}})},touchLineA:function(t){var i=o(this.LineA_all.categories),e=p.getCurrentDataIndex(t),s=i[e];p.showToolTip(t,{format:function(t,i){return s+t.name.slice(0,4)+".."+t.data+"%"}})},title:function(){t.setNavigationBarTitle({title:"排片上座"})}},onLoad:function(){f=this,this.cWidth=t.upx2px(750),this.cHeight=t.upx2px(800),this.getServerData()}};i.default=m}).call(this,e("543d")["default"])},beed:function(t,i,e){"use strict";e.r(i);var s=e("12b7"),a=e("9cde");for(var n in a)"default"!==n&&function(t){e.d(i,t,function(){return a[t]})}(n);e("63fe");var o,r=e("f0c5"),c=Object(r["a"])(a["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],o);i["default"]=c.exports},e585:function(t,i,e){"use strict";(function(t){e("b64a"),e("921b");s(e("66fd"));var i=s(e("beed"));function s(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("543d")["createPage"])}},[["e585","common/runtime","common/vendor"]]]);
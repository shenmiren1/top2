(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/showman/map_particulars/tabtow/watch_hobby"],{"2b77":function(t,e,a){"use strict";a.r(e);var i=a("4fa0"),n=a("7bd6");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("826e");var o,r=a("f0c5"),d=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=d.exports},"4edc":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,n=d(a("a34a")),s=a("2f62"),o=d(a("86fc")),r=(a("b824"),d(a("2f71")));function d(t){return t&&t.__esModule?t:{default:t}}function c(t,e,a,i,n,s,o){try{var r=t[s](o),d=r.value}catch(c){return void a(c)}r.done?e(d):Promise.resolve(d).then(i,n)}function h(t){return function(){var e=this,a=arguments;return new Promise(function(i,n){var s=t.apply(e,a);function o(t){c(s,i,n,o,r,"next",t)}function r(t){c(s,i,n,o,r,"throw",t)}o(void 0)})}}function l(t){return f(t)||u(t)||_()}function _(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function f(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),i.forEach(function(e){p(t,e,a[e])})}return t}function p(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var y=null,b={components:{},data:function(){return{ALL_month_index:-1,start_day:"",end_day:"",is_year:2019,curren:0,month:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dtype:"year",year_data:[],data_year:"",year_index:-1,year:[],time_tab:0,time_isshow:!1,code_data:[],cinema_selet_show:!0,city_data:3e3,selet_isShow_pattern:!0,cinema_data:[],cinemaAr:"type",city_selrt_index:2,city_selrt_data:["--","--","三公里","一公里"],All_data:[],selet_index:0,selet_isShow:!0,selst_Allname:["票房","场次","人次","平均票价","上座率"],selet_name:"票房",ColumnStack:[],header_data_data:["影片类型","2018年-2019年","影院选择"],cWidth:"",cHeight:"",pixelRatio:1,textarea:""}},computed:m({},(0,s.mapState)({res:"map_particulars_res",header_index:"map_particulars_tabtow_header_index"})),watch:{header_index:function(){if(3!=this.header_index)return!1;var e=this.res,a=e.city,n=e.district,s=e.latitude,o=e.longitude,d=l(this.header_data_data),c=this.dtype,h=(0,r.default)(new Date).format("YYYY")-0-3+","+(0,r.default)().format("YYYY"),_="/topprogram/compete-movielike?lat="+s+"&lng="+o+"&dtype="+c+"&year_ar="+h;this.data_year=h,d[1]=(0,r.default)(new Date).format("YYYY")-0-3+"年-"+(0,r.default)().format("YYYY年"),this.header_data_data=d;var u=l(this.city_selrt_data);u[0]=a,u[1]=n,this.city_selrt_data=u,this.city_selrt_index=2,i=this,this.cWidth=t.upx2px(750),this.cHeight=t.upx2px(800);for(var f=new Date,m=f.getFullYear(),p=[],y=Number(m);y>=2012;y--)p.push(y);this.year=p,this.db_index(_)},All_data:function(){var t=this.selet_index;this.ucharts_bottom_data(t)}},onLoad:function(){},methods:{check_month:function(e,a){if(3==e.length)var i=Number(e.slice(0,2));else i=Number(e.slice(0,1));if(this.ALL_month instanceof Array)var n=l(this.ALL_month);else n=[];(0,r.default)();var s=i,o=this.is_year-0;if(0==n.length){var d=new Date(o+"-"+s+"-01").getTime();if(n[0]==d)return t.showToast({title:"请勿点击同一月",duration:2e3,icon:"none"}),this.ALL_month=n[0],!1;t.showToast({title:"请选择结束月",duration:2e3,icon:"none"})}if(n.push(new Date(o+"-"+s+"-01").getTime()),this.ALL_month_index=a,this.ALL_month=n,console.log(n),2==n.length){this.code;if(n[0]>n[1]){var c=new Date(n[0]),h=new Date(n[1]),_=0,u=[];console.log(h);for(var f=h;f<c;_++)u.push((0,r.default)(f).format("YYYY-MM")),f.setMonth(f.getMonth()+1);if(u.length>12)return t.showToast({title:"最多选择12个月"}),this.ALL_month=n[0],!1;var m=(0,r.default)(new Date(n[1])).format("YYYY-MM"),p=(0,r.default)(new Date(n[0])).format("YYYY-MM"),y=(0,r.default)(new Date(n[1])).format("YYYY年-MM月"),b=(0,r.default)(new Date(n[0])).format("YYYY年-MM月"),g=l(this.header_data_data);g[1]=b+"-"+y;var v="month",w=this.res,x=w,Y=(x.city,x.district,x.latitude),A=x.longitude,k="/topprogram/compete-movielike?lat="+Y+"&lng="+A+"&month="+m+"&month_end="+p+"&dtype="+v;this.db_index(k),this.header_data_data=g,this.dtype=v,this.start_day=m,this.end_day=p,this.ALL_month_index=-1,n.length=0,this.ALL_month=n,this.is_year=2019,this.curren=0,this.time_isshow=!1}else if(n[1]>n[0]){c=new Date(n[1]),h=new Date(n[0]),_=0,u=[];console.log(h);for(f=h;f<c;_++)u.push((0,r.default)(f).format("YYYY-MM")),f.setMonth(f.getMonth()+1);if(u.length>12)return t.showToast({title:"最多选择12个月"}),this.ALL_month=n[0],!1;m=(0,r.default)(new Date(n[0])).format("YYYY-MM"),p=(0,r.default)(new Date(n[1])).format("YYYY-MM"),b=(0,r.default)(new Date(n[0])).format("YYYY年-MM月"),y=(0,r.default)(new Date(n[1])).format("YYYY年-MM月"),g=l(this.header_data_data);g[1]=b+"-"+y;v="month",w=this.res;var L=w,M=(L.city,L.district,L.latitude),O=L.longitude;k="/topprogram/compete-movielike?lat="+M+"&lng="+O+"&month="+m+"&month_end="+p+"&dtype="+v;this.dtype=v,this.db_index(k),this.start_day=m,this.end_day=p,this.header_data_data=g,this.ALL_month_index=-1,n.length=0,this.ALL_month=n,this.is_year=2019,this.curren=0,this.time_isshow=!1}}},tap_year:function(t,e){this.is_year=t,this.curren=e},cinema_selet_tab_click:function(t){this.time_tab=t},check_year:function(e,a){if(this.year_data instanceof Array)var i=this.year_data;else i=[];if(i.push(Number(e)),1==i.length&&t.showToast({title:"请选择结束年",icon:"none",mask:!0,duration:2e3}),this.year_data=i,this.year_index=a,2==i.length){if(i[0]==i[1])return t.showToast({title:"请勿选择同一年",icon:"none",mask:!0,duration:2e3}),this.year_data=i[0],!1;if(i[0]>i[1]){var n=i[0],s=i[1],o=l(this.header_data_data);o[1]=s+"年-"+n+"年";var r="year",d=this.res,c=d,h=(c.city,c.district,c.latitude),_=c.longitude,u="/topprogram/compete-movielike?lat="+h+"&lng="+_+"&dtype="+r+"&year_ar="+s+","+n;this.data_year=s+","+n,this.db_index(u),this.dtype=r,this.header_data_data=o,i.length=0,this.year_data=i,this.time_isshow=!1,this.year_index=-1}else if(i[1]>i[0]){n=i[1],s=i[0],o=l(this.header_data_data);o[1]=s+"年-"+n+"年";r="year",d=this.res;var f=d,m=(f.city,f.district,f.latitude),p=f.longitude;u="/topprogram/compete-movielike?lat="+m+"&lng="+p+"&dtype="+r+"&year_ar="+s+","+n;this.data_year=s+","+n,this.db_index(u),this.dtype=r,this.header_data_data=o,i.length=0,this.year_data=i,this.time_isshow=!1,this.year_index=-1}}},cinema_selet_click:function(e){var a=this.All_data,i=l(this.code_data),n=this.selet_index;if(e.show){e.show=!1;var s=[];i.forEach(function(t,a){t.cinema_code!=e.cinema_code&&s.push(t)}),this.code_data=s}else{if(i.length>=6)return t.showToast({title:"最多选择6个",icon:"none",duration:1e3}),!1;e["show"]=!0,i.push(e),a.cinemaAr[e.cinema_code]["show"]=!0,this.All_data=a,this.code_data=i}this.ucharts_bottom_data(n)},cover_selet_pattern_click:function(t){var e=this.city_data,a=l(this.header_data_data),i=this.res,n="";n="影片类型"==t?"type":"import_mode",a[0]=t;i.city,i.district;var s=i.latitude,o=i.longitude,r="/topprogram/compete-movielike?lan="+s+"&lng="+o+"&cinemaAr="+n+"&distance_meters="+e;this.db_index(r),this.header_data_data=a,this.cinemaAr=n,this.selet_isShow_pattern=!0},header_click:function(t){if(0==t){var e=this.selet_isShow_pattern;this.selet_isShow_pattern=!e,this.cinema_selet_show=!0}else 2==t?(this.cinema_selet_show=!1,this.selet_isShow_pattern=!0):1==t&&(this.time_isshow=!0)},city_selet_click:function(t,e){var a=this.res,i=this.cinemaAr,n=(a.city,a.district,a.latitude),s=a.longitude,o="",r=this.dtype,d="/topprogram/compete-movielike?lan="+n+"&lng="+s+"&cinemaAr="+i;if(2==e?(t=3e3,o=t):3==e&&(t=1e3,o=t),0==e){if(-1!=t.indexOf("市")||-1!=t.indexOf("省")){var c=t.indexOf("市");t=t.slice(0,c)}o="city,"+t,d+="&distance_meters=city,"+t}else 1==e?(o="county,"+t,d+="&distance_meters=county,"+t):(o=t,d+="&distance_meters="+t);if(console.log(r),"year"==r){var h=this.data_year;d+="&dtype="+r+"&year_ar="+h}else{var l=this.start_day,_=this.end_day;d+="&dtype="+r+"&month="+l+"&monthend="+_}this.city_data=o,this.db_index(d),this.city_selrt_index=e},cover_selet_click:function(t,e){this.selet_index=e,this.selet_name=t,this.selet_isShow=!0,this.ucharts_bottom_data(e)},showColumnStack:function(t,e){y=new o.default({$this:i,canvasId:t,type:"column",padding:[15,15,0,15],legend:{show:!0,padding:5,lineHeight:11,margin:0},fontSize:8,background:"#FFFFFF",pixelRatio:i.pixelRatio,animation:!0,categories:e.categories,series:e.series,xAxis:{disableGrid:!0,rotateLabel:!0},yAxis:{},dataLabel:!1,width:i.cWidth*i.pixelRatio,height:i.cHeight*i.pixelRatio,extra:{column:{type:"stack",width:i.cWidth*i.pixelRatio*.5/e.categories.length}}})},touchColumn:function(t){y.touchLegend(t),y.showToolTip(t,{format:function(t,e){return e+" "+t.name+":"+t.data}})},ucharts_bottom_data:function(t){console.log(t);var e=this.All_data,a=this.code_data,n={"剧情":[],"动作":[],"动画":[],"喜剧":[],"奇幻":[],"影展":[],"惊悚":[],"戏曲":[],"战争":[],"歌舞":[],"爱情":[],"科幻":[],"纪录":[],"综艺":[],"音乐":[]},s={categories:[],series:[]},o=[],r=function(i){a.forEach(function(a,o){if(a.cinema_code==i)for(var r in s.categories.push(a.cinema_name),e.data[i])if(0==t){if(-1!=(e.data[i][r].total_bo_s+"").indexOf(",")){var d=e.data[i][r].total_bo_s.split(",");e.data[i][r].total_bo_s=d[0]+d[1]}n[r].push(Number(e.data[i][r].total_bo_s))}else if(1==t){if(-1!=(e.data[i][r].session_s+"").indexOf(",")){d=e.data[i][r].session_s.split(",");e.data[i][r].session_s=d[0]+d[1]}n[r].push(Number(e.data[i][r].session_s))}else if(2==t){if(-1!=(e.data[i][r].total_people_s+"").indexOf(",")){d=e.data[i][r].total_people_s.split(",");e.data[i][r].total_people_s=d[0]+d[1]}n[r].push(Number(e.data[i][r].total_people_s).toFixed(0)-0)}else if(3==t){if(-1!=(e.data[i][r].avg_price+"").indexOf(",")){d=e.data[i][r].avg_price.split(",");e.data[i][r].avg_price=d[0]+d[1]}n[r].push(Number(e.data[i][r].avg_price).toFixed(2)-0)}else if(4==t){var c=e.data[i][r].occupancy+"";if(c.indexOf("%")){var h=c.split("%");c=h[0]}n[r].push(Number(c).toFixed(2)-0)}})};for(var d in e.data)r(d);var c=["#ec6941","#f09148","#f8b551","#fff35d","#b3d465","#80c269","#32b16c","#15b5b1","#02b7ee","#448aca","#566fb5","#8957a1","#ae5da1","#ea68a2","#eb6877"],h=0;for(var l in n)s.series.push({name:l,data:n[l],color:c[h]}),h++;a.forEach(function(t,a){e.sum.forEach(function(e,a){if(e.cinema_name==t.cinema_name){var i={cinema_name:e.cinema_name,total_bo_s:"",occupancy:"",total_people_s:"",session_s:"",avg_price:""};Number(e.total_bo_s/1e8)>1?i.total_bo_s=Number(e.total_bo_s/1e8).toFixed(2)+"亿":i.total_bo_s=Number(e.total_bo_s/1e4).toFixed(2)+"万",i.occupancy=(100*Number(e.occupancy)).toFixed(2),i.total_people_s=Number(e.total_people_s/1e4).toFixed(2),i.session_s=Number(e.session_s/1e4).toFixed(2),i.avg_price=Number(e.avg_price).toFixed(2),o.push(i)}})}),this.cinema_data=o,this.ColumnStack=s,i.showColumnStack("canvasColumnStack",s)},db_index:function(){var t=h(n.default.mark(function t(e){var a,i,s,o;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,this.$http.get({url:e});case 3:a=t.sent,i=a.data,console.log(i),s=[],t.t0=n.default.keys(i.cinemaAr);case 8:if((t.t1=t.t0()).done){t.next=18;break}if(o=t.t1.value,6!=s.length){t.next=14;break}return t.abrupt("break",18);case 14:s.push(i.cinemaAr[o]),i.cinemaAr[o].show=!0;case 16:t.next=8;break;case 18:this.code_data=s,this.All_data=i;case 20:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}};e.default=b}).call(this,a("543d")["default"])},"4fa0":function(t,e,a){"use strict";var i,n=function(){var t=this,e=this,a=e.$createElement;e._self._c;e._isMounted||(e.e0=function(){t.selet_isShow=!t.selet_isShow},e.e1=function(){t.cinema_selet_show=!0},e.e2=function(){t.time_isshow=!1})},s=[];a.d(e,"b",function(){return n}),a.d(e,"c",function(){return s}),a.d(e,"a",function(){return i})},"7bd6":function(t,e,a){"use strict";a.r(e);var i=a("4edc"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a},"826e":function(t,e,a){"use strict";var i=a("9884"),n=a.n(i);n.a},9884:function(t,e,a){}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/showman/map_particulars/tabtow/watch_hobby-create-component',
    {
        'pages/showman/map_particulars/tabtow/watch_hobby-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("2b77"))
        })
    },
    [['pages/showman/map_particulars/tabtow/watch_hobby-create-component']]
]);

(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/showman/map_particulars/tabone"],{"0ef5":function(t,e,o){},"0f54":function(t,e,o){"use strict";var a=o("0ef5"),i=o.n(a);i.a},6607:function(t,e,o){"use strict";var a,i=function(){var t=this,e=this,o=e.$createElement;e._self._c;e._isMounted||(e.e0=function(){t.is_index=!1},e.e1=function(){t.is_index=!0})},n=[];o.d(e,"b",function(){return i}),o.d(e,"c",function(){return n}),o.d(e,"a",function(){return a})},"725f":function(t,e,o){"use strict";o.r(e);var a=o("6607"),i=o("ed04");for(var n in i)"default"!==n&&function(t){o.d(e,t,function(){return i[t]})}(n);o("0f54");var s,r=o("f0c5"),l=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);e["default"]=l.exports},"77fa":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,i=r(o("a34a")),n=r(o("86fc")),s=(o("b824"),o("2f62"));function r(t){return t&&t.__esModule?t:{default:t}}function l(t,e,o,a,i,n,s){try{var r=t[n](s),l=r.value}catch(_){return void o(_)}r.done?e(l):Promise.resolve(l).then(a,i)}function _(t){return function(){var e=this,o=arguments;return new Promise(function(a,i){var n=t.apply(e,o);function s(t){l(n,a,i,s,r,"next",t)}function r(t){l(n,a,i,s,r,"throw",t)}s(void 0)})}}function c(t){return p(t)||d(t)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function p(t){if(Array.isArray(t)){for(var e=0,o=new Array(t.length);e<t.length;e++)o[e]=t[e];return o}}function m(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},a=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),a.forEach(function(e){f(t,e,o[e])})}return t}function f(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var h=null,b=null,x={props:{},data:function(){return{is_index:!0,zb_title:[{zb_name:"票房",two_title:"(万元)",is_check:"",no_check:"分账",front_row:!0},{zb_name:"票房",two_title:"占比",is_check:"",no_check:"分账",front_row:!0},{zb_name:"排场占比",two_title:"",is_check:"",no_check:"",front_row:!1},{zb_name:"上座率",two_title:"",is_check:"",no_check:"",front_row:!0},{zb_name:"排座占比",two_title:"",is_check:"",no_check:"",front_row:!0},{zb_name:"票价",two_title:"",is_check:"平均",no_check:"平均",front_row:!1},{zb_name:"场均人次",two_title:"",is_check:"",no_check:"",front_row:!1},{zb_name:"场次",two_title:"",is_check:"",no_check:"",front_row:!1},{zb_name:"人次",two_title:"",is_check:"",no_check:"",front_row:!1}],canvas_one_Written_data:["影院数和总票房","观影人次和平均票价"],AllSum_data:{sum:{total_bo_s:"---",total_people_s:"---",session_s:"---"}},Choice_data_index:2,Choice_data:["--","--","三公里","一公里"],Choice_data_tow:[],zx_time:"--",header_data:["区域概况","竞争影院"],title_data:["区域票房","人效分析"],tab_one_index:0,cWidth:"",cHeight:"",pixelRatio:1,textarea:""}},computed:m({},(0,s.mapState)({haeder_index:"map_particulars_index",res:"map_particulars_res"})),watch:{haeder_index:function(){if(1==this.haeder_index)return!1;var e=this.res,o=e.city,i=e.district,n=e.latitude,s=e.longitude,r=c(this.Choice_data),l=[];r[0]=o,r[1]=i,l[0]=o,l[1]=i,this.Choice_data_tow=l,this.Choice_data=r;var _=(new Date).getFullYear();this.zx_time=_,a=this,this.cWidth=t.upx2px(750),this.cHeight=t.upx2px(500),this.tab_one_index=0,this.Choice_data_index=2;var u="/topprogram/region-total?lat="+n+"&lng="+s,d=["影院数和总票房","观影人次和平均票价"];this.canvas_one_Written_data=d,this.db_index_one(u)},res:function(){if(1==this.haeder_index)return!1;var t=this.res;t.city,t.district,t.latitude,t.longitude}},methods:{more_index_data_tap:function(e){var o=c(this.zb_title);if(o[e].front_row)o[e].front_row=!1;else{for(var a=0,i=0;i<o.length-1;i++)if(o[i].front_row&&(0==a?a=1:1==a?a=2:2==a?a=3:3==a&&(a=4)),4==a)return t.showToast({title:"最多选择四项",duration:2e3,icon:"none"}),!1;a<=4&&(o[e].front_row=!0)}this.zb_title=o},db_index_tow:function(){var t=_(i.default.mark(function t(e){var o,n,s,r,l,_,c;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,this.$http.get({url:e});case 3:for(_ in o=t.sent,n=o.data,s=n.echarts_data,r={categories:[],series:[]},l={categories:[],series:[]},l.categories=s.left_data.xAxis_data,r.categories=s.right_data.xAxis_data,s)"left_data"==_?r.series.push({data:s[_].people_frequency,type:"line",name:"观影频次",color:"#3E8EF2"}):"right_data"==_&&(l.series.push({data:s[_].halls_data,type:"column",name:"荧幕数",color:"#F08E2D"}),l.series.push({data:s[_].people_halls,type:"line",name:"单荧幕覆盖人口",color:"#3E8EF2"}));c=n.sum,n.data.forEach(function(t,e){t.total_zb=(Number(t.total_bo_s)/c.total_bo_s*100).toFixed(2),t.session_zb=(Number(t.session_s)/c.session_s*100).toFixed(2),t.occupancy=(100*Number(t.occupancy)).toFixed(2),t.total_seats_zb=(Number(t.total_seats)/Number(c.total_seats)*100).toFixed(2)+"%",t.avg_price=Number(t.avg_price).toFixed(2),t.cj_people_s=(Number(t.total_people_s)/Number(t.session_s)).toFixed(0),Number(t.total_bo_s)/1e8>1?t.total_bo_s=(Number(t.total_bo_s)/1e8).toFixed(2)+"亿":t.total_bo_s=(Number(t.total_bo_s)/1e4).toFixed(2)+"万"}),Number(n.sum.total_bo_s)/1e8>1?n.sum.total_bo_s=(Number(n.sum.total_bo_s)/1e8).toFixed(2)+"亿":n.sum.total_bo_s=(Number(n.sum.total_bo_s)/1e4).toFixed(2)+"万",Number(n.sum.total_people_s)/1e8>1?n.sum.total_people_s=(Number(n.sum.total_people_s)/1e8).toFixed(2)+"亿":n.sum.total_people_s=(Number(n.sum.total_people_s)/1e4).toFixed(2)+"万",Number(n.sum.session_s)/1e8>1?n.sum.session_s=(Number(n.sum.session_s)/1e8).toFixed(2)+"亿":n.sum.session_s=(Number(n.sum.session_s)/1e4).toFixed(2)+"万",a.AllSum_data=n,a.showMix("canvasMix",r),a.showMix_pj("canvasMix_pj",l);case 19:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),Choice_data_click:function(t,e){var o=this.tab_one_index,a=this.res,i=a.city,n=a.district,s=a.latitude,r=a.longitude,l="/topprogram/region-total?lat="+s+"&lng="+r;if(this.Choice_data_index=e,"三公里"==t||"一公里"==t)3==e?l+="&distance_meters=1000":2==e&&(l+="&distance_meters=3000"),this.db_index_one(l);else if(1==o){if(0==e){if(-1!=i.indexOf("市")||-1!=i.indexOf("省")){var _=i.indexOf("市");i=i.slice(0,_)}l="/topprogram/region-people?distance_meters=city,"+i+"&lat="+s+"&lng="+r}else l="/topprogram/region-people?distance_meters=county,"+n+"&lat="+s+"&lng="+r;this.db_index_tow(l)}else{if(0==e){if(-1!=i.indexOf("市")||-1!=i.indexOf("省")){_=i.indexOf("市");i=i.slice(0,_)}l+="&distance_meters=city,"+i}else l+="&distance_meters=county,"+n;this.db_index_one(l)}},db_index_one:function(){var t=_(i.default.mark(function t(e){var o,n,s,r,l,_,c;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,this.$http.get({url:e});case 3:for(_ in o=t.sent,n=o.data,s=n.echarts_data,r={categories:[],series:[]},l={categories:[],series:[]},l.categories=s.left_data.xAxis_data,r.categories=s.right_data.xAxis_data,s)"left_data"==_?(r.series.push({data:s[_].cinemas_data,type:"column",name:"影院数",color:"#F08E2D"}),r.series.push({data:s[_].total_data,type:"line",name:"总票房/亿",color:"#3E8EF2"})):"right_data"==_&&(l.series.push({data:s[_].people_data,type:"column",name:"观影人次/万",color:"#F08E2D"}),l.series.push({data:s[_].price_data,type:"line",name:"平均票价/元",color:"#3E8EF2"}));c=n.sum,n.data.forEach(function(t,e){t.total_zb=(Number(t.total_bo_s)/c.total_bo_s*100).toFixed(2),t.session_zb=(Number(t.session_s)/c.session_s*100).toFixed(2),t.occupancy=(100*Number(t.occupancy)).toFixed(2),t.total_seats_zb=(Number(t.total_seats)/Number(c.total_seats)*100).toFixed(2)+"%",t.avg_price=Number(t.avg_price).toFixed(2),t.cj_people_s=(Number(t.total_people_s)/Number(t.session_s)).toFixed(0),Number(t.total_bo_s)/1e8>1?t.total_bo_s=(Number(t.total_bo_s)/1e8).toFixed(2)+"亿":t.total_bo_s=(Number(t.total_bo_s)/1e4).toFixed(2)+"万"}),Number(n.sum.total_bo_s)/1e8>1?n.sum.total_bo_s=(Number(n.sum.total_bo_s)/1e8).toFixed(2)+"亿":n.sum.total_bo_s=(Number(n.sum.total_bo_s)/1e4).toFixed(2)+"万",Number(n.sum.total_people_s)/1e8>1?n.sum.total_people_s=(Number(n.sum.total_people_s)/1e8).toFixed(2)+"亿":n.sum.total_people_s=(Number(n.sum.total_people_s)/1e4).toFixed(2)+"万",Number(n.sum.session_s)/1e8>1?n.sum.session_s=(Number(n.sum.session_s)/1e8).toFixed(2)+"亿":n.sum.session_s=(Number(n.sum.session_s)/1e4).toFixed(2)+"万",a.AllSum_data=n,a.showMix("canvasMix",r),a.showMix_pj("canvasMix_pj",l);case 19:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),showMix:function(t,e){h=new n.default({$this:a,canvasId:t,type:"mix",fontSize:11,padding:[5,5,0,5],legend:{show:!0},background:"#FFFFFF",pixelRatio:a.pixelRatio,categories:e.categories,series:e.series,animation:!0,enableScroll:!0,xAxis:{disableGrid:!0,type:"grid",gridType:"dash",itemCount:5,scrollShow:!0,scrollAlign:"left"},yAxis:{data:[{min:0,max:10,format:function(t){return t.toFixed(0)}}],gridType:"solid",splitNumber:5},width:a.cWidth*a.pixelRatio,height:a.cHeight*a.pixelRatio,dataLabel:!1,dataPointShape:!0,extra:{column:{width:20*a.pixelRatio},tooltip:{bgColor:"#000000",bgOpacity:.7,gridType:"dash",dashLength:8,gridColor:"#1890ff",fontColor:"#FFFFFF",horizentalLine:!0,xAxisLabel:!0,yAxisLabel:!0,labelBgColor:"#DFE8FF",labelBgOpacity:.95,labelAlign:"left",labelFontColor:"#666666"}}})},touchMix:function(t){h.scrollStart(t)},moveMix:function(t){h.scroll(t)},touchEndMix:function(t){var e=this.tab_one_index;h.scrollEnd(t),h.showToolTip(t,{format:function(t,o){return"总票房/亿"==t.name?(t.name="总票房",t.data=t.data+"亿"):1!=e&&(t.data=t.data+"个"),o+" "+t.name+":"+t.data}})},showMix_pj:function(t,e){b=new n.default({$this:a,canvasId:t,type:"mix",fontSize:11,padding:[5,5,0,5],legend:{show:!0},background:"#FFFFFF",pixelRatio:a.pixelRatio,categories:e.categories,series:e.series,animation:!0,enableScroll:!0,xAxis:{disableGrid:!0,type:"grid",gridType:"dash",itemCount:5,scrollShow:!0,scrollAlign:"left"},yAxis:{gridType:"solid",splitNumber:5,min:0,max:10,format:function(t){return t.toFixed(0)}},width:a.cWidth*a.pixelRatio,height:a.cHeight*a.pixelRatio,dataLabel:!1,dataPointShape:!0,extra:{column:{width:20*a.pixelRatio},tooltip:{bgColor:"#000000",bgOpacity:.7,gridType:"dash",dashLength:8,gridColor:"#1890ff",fontColor:"#FFFFFF",horizentalLine:!0,xAxisLabel:!0,yAxisLabel:!0,labelBgColor:"#DFE8FF",labelBgOpacity:.95,labelAlign:"left",labelFontColor:"#666666"}}})},touchMix_pj:function(t){b.scrollStart(t)},moveMix_pj:function(t){b.scroll(t)},touchEndMix_pj:function(t){b.scrollEnd(t);var e=this.tab_one_index;b.showToolTip(t,{format:function(t,o){return 1!=e&&("观影人次/万"==t.name?(t.name="观影人次",t.data=t.data+"万"):(t.name="平均票价",t.data=t.data+"元")),o+" "+t.name+":"+t.data}})},tab_one_tap:function(t){this.tab_one_index=t;var e=this.res,o=(e.city,e.district),a=e.latitude,i=e.longitude,n=["影院数和总票房","观影人次和平均票价"],s=["观影频次","荧幕数和单荧幕覆盖人口"],r="";1==t?(r="/topprogram/region-people?lat="+a+"&lng="+i+"&distance_meters=county,"+o,this.Choice_data_index=1,this.canvas_one_Written_data=s,this.db_index_tow(r)):(r+="/topprogram/region-total?lat="+a+"&lng="+i,this.Choice_data_index=2,this.canvas_one_Written_data=n,this.db_index_one(r))}}};e.default=x}).call(this,o("543d")["default"])},a943:function(t,e,o){"use strict";(function(t){o("b64a"),o("921b");a(o("66fd"));var e=a(o("725f"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},ed04:function(t,e,o){"use strict";o.r(e);var a=o("77fa"),i=o.n(a);for(var n in a)"default"!==n&&function(t){o.d(e,t,function(){return a[t]})}(n);e["default"]=i.a}},[["a943","common/runtime","common/vendor"]]]);